    <!-- Личный кабинет (/account) -->
    <div class="account-screen" id="account-screen" hidden>
      <header class="admin-header">
        <div class="admin-header-inner">
          <h1 class="admin-logo">Flipbook <span class="admin-badge">Личный кабинет</span></h1>
          <nav class="admin-nav">
            <a class="admin-nav-link" id="accountToShelf" data-route="/">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                <path fill="currentColor" d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/>
              </svg>
              На книжную полку
            </a>
          </nav>
        </div>
      </header>

      <main class="admin-main">
        <!-- Табы верхнего уровня -->
        <div class="admin-tabs" role="tablist" aria-label="Разделы личного кабинета">
          <button class="admin-tab active" role="tab" aria-selected="true" data-tab="books">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path fill="currentColor" d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
            </svg>
            Мои книги
          </button>
          <button class="admin-tab" role="tab" aria-selected="false" data-tab="profile">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            Профиль
          </button>
          <button class="admin-tab" role="tab" aria-selected="false" data-tab="platform">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
            Настройки
          </button>
          <button class="admin-tab" role="tab" aria-selected="false" data-tab="export">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
            Экспорт
          </button>
        </div>

        <!-- Содержимое табов -->
        <div class="admin-content">

          <!-- ═══════════════════════════════════════ -->
          <!-- ЭКРАН: МОИ КНИГИ                       -->
          <!-- ═══════════════════════════════════════ -->
          <section class="admin-panel active" data-panel="books" role="tabpanel">

            <!-- ─── Вид: Книжная полка ─── -->
            <div class="screen-view active" data-view="bookshelf" id="viewBookshelf">
              <div class="panel-header">
                <h2>Мои книги</h2>
              </div>

              <div class="book-selector" id="bookSelector">
                <!-- Генерируется динамически -->
              </div>

              <button class="btn btn-primary" id="addBookBtn" type="button">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                Добавить книгу
              </button>
            </div>

            <!-- ─── Вид: Выбор режима ─── -->
            <div class="screen-view" data-view="mode-selector" id="viewModeSelector" hidden>
              <div class="screen-back-row">
                <button class="btn-back" type="button" id="modeSelectorBack">
                  <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                    <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                  </svg>
                  К полке
                </button>
              </div>

              <div class="mode-selector-header">
                <h2>Как вы хотите создать книгу?</h2>
                <p class="panel-description">Выберите способ — вы всегда сможете отредактировать результат</p>
              </div>

              <div class="mode-cards" id="modeCards">
                <!-- Карточки режимов генерируются из JS -->
              </div>
            </div>

            <!-- ─── Вид: Загрузка файла ─── -->
            <div class="screen-view" data-view="upload" id="viewUpload" hidden>
              <div class="screen-back-row">
                <button class="btn-back" type="button" id="uploadBack">
                  <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                    <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                  </svg>
                  Назад
                </button>
                <h2>Загрузить книгу</h2>
              </div>

              <div class="book-upload-area" id="bookUploadArea">
                <div class="book-upload-dropzone" id="bookDropzone">
                  <svg viewBox="0 0 24 24" width="48" height="48" aria-hidden="true">
                    <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                  </svg>
                  <p class="book-upload-text">Перетащите файл сюда или нажмите для выбора</p>
                  <p class="book-upload-hint">Форматы: .epub, .fb2, .docx, .doc, .txt</p>
                  <input type="file" id="bookFileInput" accept=".epub,.fb2,.docx,.doc,.txt" hidden>
                </div>

                <div class="book-upload-progress" id="bookUploadProgress" hidden>
                  <div class="book-upload-spinner"></div>
                  <p class="book-upload-status" id="bookUploadStatus">Обработка файла...</p>
                </div>

                <div class="book-upload-result" id="bookUploadResult" hidden>
                  <div class="book-upload-result-info">
                    <h4 id="bookUploadTitle"></h4>
                    <p id="bookUploadAuthor"></p>
                    <p id="bookUploadChaptersCount"></p>
                  </div>
                  <div class="book-upload-result-actions">
                    <button class="btn btn-primary" id="bookUploadConfirm" type="button">Добавить книгу</button>
                    <button class="btn btn-secondary" id="bookUploadCancel" type="button">Отмена</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ─── Вид: Редактор книги ─── -->
            <div class="screen-view" data-view="editor" id="viewEditor" hidden>
              <div class="screen-back-row">
                <button class="btn-back" type="button" id="editorBack">
                  <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                    <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                  </svg>
                  К полке
                </button>
                <h2 class="editor-title" id="editorTitle">Редактор книги</h2>
                <span class="save-indicator" id="saveIndicator" aria-live="polite">
                  <svg viewBox="0 0 24 24" width="14" height="14" aria-hidden="true">
                    <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                  <span id="saveIndicatorText">Сохранено</span>
                </span>
                <button class="btn btn-danger btn-small" id="deleteBook" type="button">
                  <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                    <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                  </svg>
                  Удалить
                </button>
              </div>

              <!-- Внутренние табы редактора -->
              <div class="editor-tabs-wrapper" id="editorTabsWrapper">
                <div class="editor-tabs" id="editorTabs" role="tablist" aria-label="Разделы редактора книги">
                  <button class="editor-tab active" type="button" role="tab" aria-selected="true" data-editor-tab="cover">Обложка</button>
                  <button class="editor-tab" type="button" role="tab" aria-selected="false" data-editor-tab="chapters">Главы</button>
                  <button class="editor-tab" type="button" role="tab" aria-selected="false" data-editor-tab="appearance">Оформление</button>
                  <button class="editor-tab" type="button" role="tab" aria-selected="false" data-editor-tab="sounds">Звуки</button>
                  <button class="editor-tab" type="button" role="tab" aria-selected="false" data-editor-tab="defaults">Настройки чтения</button>
                  <button class="editor-tab" type="button" role="tab" aria-selected="false" data-editor-tab="publish">Публикация</button>
                </div>
              </div>

              <!--#include "html/partials/admin/editor-cover.html" -->
              <!--#include "html/partials/admin/editor-chapters.html" -->
              <!--#include "html/partials/admin/editor-appearance.html" -->
              <!--#include "html/partials/admin/editor-sounds.html" -->
              <!--#include "html/partials/admin/editor-defaults.html" -->

              <!-- === Таб: Публикация === -->
              <div class="editor-panel" data-editor-panel="publish" role="tabpanel" hidden>
                <fieldset class="setting-fieldset">
                  <legend class="setting-fieldset-legend">Видимость</legend>
                  <p class="fieldset-description">Определяет, кто может видеть эту книгу</p>
                  <div class="publish-visibility-selector" id="publishVisibility">
                    <label class="publish-visibility-option">
                      <input type="radio" name="bookVisibility" value="draft" checked>
                      <div class="publish-visibility-card">
                        <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                          <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                        </svg>
                        <strong>Черновик</strong>
                        <span>Видна только вам</span>
                      </div>
                    </label>
                    <label class="publish-visibility-option">
                      <input type="radio" name="bookVisibility" value="published">
                      <div class="publish-visibility-card">
                        <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <strong>Опубликована</strong>
                        <span>Видна всем на вашей полке</span>
                      </div>
                    </label>
                    <label class="publish-visibility-option">
                      <input type="radio" name="bookVisibility" value="unlisted">
                      <div class="publish-visibility-card">
                        <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                          <path fill="currentColor" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                        </svg>
                        <strong>По ссылке</strong>
                        <span>Доступна только по прямой ссылке</span>
                      </div>
                    </label>
                  </div>
                </fieldset>

                <fieldset class="setting-fieldset setting-fieldset--top">
                  <legend class="setting-fieldset-legend">Описание</legend>
                  <p class="fieldset-description">Краткое описание книги для каталога (до 2000 символов)</p>
                  <textarea class="form-input form-textarea" id="bookDescription" rows="4" maxlength="2000" placeholder="Опишите вашу книгу..."></textarea>
                  <div class="char-counter"><span id="descCharCount">0</span> / 2000</div>
                </fieldset>

                <fieldset class="setting-fieldset setting-fieldset--top" id="shareSection" hidden>
                  <legend class="setting-fieldset-legend">Ссылка для шаринга</legend>
                  <div class="share-link-row">
                    <input class="form-input" type="text" id="shareLink" readonly>
                    <button class="btn btn-secondary" type="button" id="copyShareLink">
                      <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                        <path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                      </svg>
                      Копировать
                    </button>
                  </div>
                </fieldset>

                <div class="panel-actions panel-actions--top">
                  <button class="btn btn-primary" id="savePublish" type="button">Сохранить</button>
                </div>
              </div>
            </div>

            <!-- ─── Вид: Редактор фотоальбома ─── -->
            <div class="screen-view" data-view="album" id="viewAlbum" hidden>
              <div class="screen-back-row">
                <button class="btn-back" type="button" id="albumBack">
                  <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                    <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                  </svg>
                  Назад
                </button>
                <h2 id="albumHeading">Фотоальбом</h2>
              </div>

              <div class="album-editor-form" id="albumEditorForm">
                <div class="form-group">
                  <label class="form-label" for="albumTitle">Название (для оглавления)</label>
                  <input class="form-input" type="text" id="albumTitle" placeholder="Иллюстрации">
                </div>

                <div class="form-group">
                  <label class="admin-toggle album-hide-toggle">
                    <input type="checkbox" id="albumHideTitle" checked>
                    <span class="admin-toggle-slider"></span>
                  </label>
                  <span class="album-hide-label">Скрыть заголовок на странице</span>
                  <span class="form-hint">Заголовок будет виден только в оглавлении</span>
                </div>

                <div id="albumPages"></div>

                <div class="album-actions-row">
                  <button class="btn btn-secondary album-add-page-btn" type="button" id="albumAddPage">+ Добавить страницу</button>
                  <button class="btn btn-secondary album-bulk-upload-btn" type="button" id="albumBulkUpload">
                    <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
                    Загрузить фото
                  </button>
                </div>

                <div class="panel-actions" style="margin-top: 20px;">
                  <button class="btn btn-primary" type="button" id="saveAlbum">Добавить альбом</button>
                  <button class="btn btn-secondary" type="button" id="cancelAlbum">Отмена</button>
                </div>
              </div>
            </div>
          </section>

          <!-- ═══════════════════════════════════════ -->
          <!-- ЭКРАН: ПРОФИЛЬ                         -->
          <!-- ═══════════════════════════════════════ -->
          <section class="admin-panel" data-panel="profile" role="tabpanel" hidden>
            <div class="panel-header">
              <h2>Профиль</h2>
              <p class="panel-description">Настройте свой публичный профиль</p>
            </div>

            <div class="profile-edit-form">
              <!-- Превью профиля -->
              <div class="profile-edit-preview" id="profilePreview">
                <!-- Генерируется динамически через ProfileModule -->
              </div>

              <fieldset class="setting-fieldset">
                <legend class="setting-fieldset-legend">Основная информация</legend>
                <div class="settings-grid settings-grid--inner">
                  <div class="setting-card">
                    <label class="setting-label" for="profileUsername">Имя пользователя</label>
                    <div class="profile-username-input">
                      <span class="profile-username-prefix">@</span>
                      <input class="form-input" type="text" id="profileUsername" placeholder="username" pattern="^[a-z0-9][a-z0-9-]{2,39}$">
                    </div>
                    <span class="form-hint" id="usernameHint">Латиница, цифры, дефис. 3–40 символов.</span>
                    <span class="form-validation" id="usernameValidation" hidden></span>
                  </div>
                  <div class="setting-card">
                    <label class="setting-label" for="profileDisplayName">Отображаемое имя</label>
                    <input class="form-input" type="text" id="profileDisplayName" placeholder="Как вас зовут?" maxlength="100">
                  </div>
                </div>
              </fieldset>

              <fieldset class="setting-fieldset setting-fieldset--top">
                <legend class="setting-fieldset-legend">О себе</legend>
                <textarea class="form-input form-textarea" id="profileBio" rows="3" maxlength="500" placeholder="Расскажите о себе..."></textarea>
                <div class="char-counter"><span id="bioCharCount">0</span> / 500</div>
              </fieldset>

              <fieldset class="setting-fieldset setting-fieldset--top">
                <legend class="setting-fieldset-legend">Аватар</legend>
                <div class="profile-avatar-upload">
                  <div class="profile-avatar-current" id="profileAvatarPreview">
                    <!-- Генерируется динамически -->
                  </div>
                  <div class="profile-avatar-actions">
                    <label class="btn btn-secondary upload-btn">
                      <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                        <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                      </svg>
                      Загрузить фото
                      <input type="file" id="profileAvatarInput" accept="image/png,image/jpeg,image/webp" hidden>
                    </label>
                    <button class="btn btn-secondary" type="button" id="profileAvatarRemove" hidden>Удалить</button>
                  </div>
                  <span class="form-hint">PNG, JPEG или WebP. Рекомендуемый размер: 200×200px.</span>
                </div>
              </fieldset>

              <div class="panel-actions panel-actions--top">
                <button class="btn btn-primary" id="saveProfile" type="button">Сохранить профиль</button>
              </div>
            </div>
          </section>

          <!--#include "html/partials/admin/platform-settings.html" -->
          <!--#include "html/partials/admin/export-panel.html" -->

        </div>
      </main>

      <!-- Уведомления -->
      <div class="admin-toast" id="toast" hidden>
        <svg class="admin-toast__icon" id="toastIcon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <path fill="currentColor" id="toastIconPath"/>
        </svg>
        <span id="toastMessage"></span>
      </div>

      <!--#include "html/partials/admin/modal-chapter.html" -->
      <!--#include "html/partials/admin/modal-ambient.html" -->
      <!--#include "html/partials/admin/modal-reading-font.html" -->

      <!-- Универсальный диалог подтверждения -->
      <dialog class="admin-modal admin-modal--confirm" id="confirmDialog">
        <div class="modal-form">
          <h3 class="modal-title" id="confirmTitle">Подтверждение</h3>
          <p class="confirm-message" id="confirmMessage"></p>
          <div class="modal-actions">
            <button class="btn btn-secondary" type="button" id="confirmCancel">Отмена</button>
            <button class="btn btn-danger" type="button" id="confirmOk">Удалить</button>
          </div>
        </div>
      </dialog>
    </div>
