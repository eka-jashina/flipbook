<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Book ‚Äì Modular Architecture</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter&family=Roboto&family=Open+Sans&family=Merriweather&family=Libre+Baskerville&display=swap"
      rel="stylesheet"
    />

    <!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ -->
    <link rel="preload" fetchpriority="high" as="image" href="images/backgrounds/bg-cover.webp" type="image/webp">
    <link rel="preload" href="fonts/tolkiencyr.woff2" as="font" crossorigin="anonymous">

    <!-- –ì–ª–∞–≤–Ω—ã–π CSS (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏) -->
    <link rel="stylesheet" href="css/index.css" />
  </head>

<body data-debug="false">
    <!-- –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–ª–∞–≤ (–¥–≤–∞ —Å–ª–æ—è –¥–ª—è –∫—Ä–æ—Å—Å—Ñ–µ–π–¥–∞) -->
    <div class="chapter-bg">
      <div class="bg" data-active="false"></div>
      <div class="bg" data-active="false"></div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏ -->
    <div class="debug-info" id="debugInfo">
      <div>State: <span id="debugState">-</span></div>
      <div>Pages: <span id="debugTotal">0</span></div>
      <div>Current: <span id="debugCurrent">0</span></div>
      <div>Cache: <span id="debugCache">0</span></div>
      <div>Memory: <span id="debugMemory">-</span></div>
      <div>Listeners: <span id="debugListeners">0</span></div>
    </div>

    <!-- Error message –≤ HTML-->
    <div class="error-message" id="errorMessage" hidden role="alert">
      <span id="errorText"></span>
    </div>

    <div class="scene">
      <div class="book-wrap" data-state="closed" id="book-wrap">
        <div
          class="book"
          data-state="closed"
          id="book"
          role="region"
          aria-label="–ö–Ω–∏–≥–∞"
        >
          <!-- –û–±–ª–æ–∂–∫–∞ -->
          <div class="cover" id="cover">
            <div class="cover-front">
              <h1><span>–û —Ö–æ–±–±–∏—Ç–∞—Ö</span> <span>–î–∂.–†.–†.–¢–æ–ª–∫–∏–Ω</span></h1>
            </div>
            <div class="cover-back"></div>
          </div>

          <!-- –ö—Ä–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü -->
          <div class="pages-edge" aria-hidden="true"></div>

          <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (A-–±—É—Ñ–µ—Ä) -->
          <div class="page" data-side="left" data-active="true" id="leftA" aria-live="polite">
            <div class="page-inner"></div>
          </div>
          <div class="page" data-side="right" data-active="true" id="rightA" aria-live="polite">
            <div class="page-inner"></div>
          </div>

          <!-- –ë—É—Ñ–µ—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (B-–±—É—Ñ–µ—Ä) -->
          <div class="page" data-side="left" data-buffer="true" id="leftB" aria-hidden="true">
            <div class="page-inner"></div>
          </div>
          <div class="page" data-side="right" data-buffer="true" id="rightB" aria-hidden="true">
            <div class="page-inner"></div>
          </div>

          <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏—Å—Ç -->
          <div class="sheet" id="sheet" aria-hidden="true">
            <div class="side" data-face="front" id="sheetFront"></div>
            <div class="side" data-face="back" id="sheetBack"></div>
          </div>

          <div class="flip-shadow" id="flipShadow"></div>

          <!-- –ó–æ–Ω—ã –∑–∞—Ö–≤–∞—Ç–∞ –¥–ª—è drag
            –í debug —Ä–µ–∂–∏–º–µ ([data-debug="true"]) –±—É–¥—É—Ç –≤–∏–¥–Ω—ã -->
          <div class="corner-zone top-right" data-dir="next"></div>
          <div class="corner-zone bottom-right" data-dir="next"></div>
          <div class="corner-zone top-left" data-dir="prev"></div>
          <div class="corner-zone bottom-left" data-dir="prev"></div>

          <!-- Loading overlay —Å hidden –∞—Ç—Ä–∏–±—É—Ç–æ–º -->
          <div class="loading-overlay" id="loadingOverlay" hidden>
            <div class="loading-spinner"></div>
            <div class="loading-progress" id="loadingProgress">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
          </div>

          <!-- –ò–∑–º–µ—Ä–∏—Ç–µ–ª—å -->
          <div id="measurer"></div>
        </div>
      </div>

      <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
      <div class="controls">
        <div class="navigation">
          <button id="prev">‚Üê –ù–∞–∑–∞–¥</button>
          <button id="tocBtn">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</button>
          <button id="next">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
          <button id="continueBtn" hidden>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ</button>
          <label>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
            <input class="settings-checkbox" type="checkbox" id="settings-checkbox" />
          </label>
        </div>
        <div class="settings" role="group" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á—Ç–µ–Ω–∏—è">
          <div>
            <div class="font-size">
              <span>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ </span>
              <button id="decrease">‚àí</button>
              <button id="increase">+</button>
            </div>
            <div class="font-choice">
              <label for="font-select">–®—Ä–∏—Ñ—Ç:</label>
              <select id="font-select">
                <option value="georgia">Georgia</option>
                <option value="merriweather">Merriweather</option>
                <option value="libre-baskerville">Libre Baskerville</option>
                <option value="inter">Inter</option>
                <option value="roboto">Roboto</option>
                <option value="open-sans">Open Sans</option>
              </select>
            </div>
            <div class="theme-choice">
              <label for="theme-select">–¢–µ–º–∞:</label>
              <select id="theme-select">
                <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                <option value="dark">–¢—ë–º–Ω–∞—è</option>
                <option value="bw">–ß/–±</option>
              </select>
            </div>
            <!-- <button id="debugToggle">Debug</button> -->
          </div>
          <div>
            <div class="sound-controls">
              <label>
                <input type="checkbox" id="sound-toggle" checked />
                –ó–≤—É–∫
              </label>
              <div class="sound-volume">
                <button id="volume-down" title="–£–º–µ–Ω—å—à–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å">üîâ</button>
                <input 
                  type="range" 
                  id="volume-slider" 
                  min="0" 
                  max="100" 
                  value="30" 
                  title="–ì—Ä–æ–º–∫–æ—Å—Ç—å"
                />
                <button id="volume-up" title="–£–≤–µ–ª–∏—á–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å">üîä</button>
              </div>
            </div>
            <div class="ambient-controls">
              <label for="ambient-select">–§–æ–Ω:</label>
              <select id="ambient-select">
                <!-- Options –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ CONFIG.AMBIENT -->
              </select>
              <div class="ambient-volume" id="ambient-volume-wrapper">
                <input 
                  type="range" 
                  id="ambient-volume" 
                  min="0" 
                  max="100" 
                  value="50" 
                  title="–ì—Ä–æ–º–∫–æ—Å—Ç—å —Ñ–æ–Ω–∞"
                />
                <span id="ambient-volume-label">50%</span>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <span>—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ - <a href="https://t.me/layare">@layare</a></span>
          <span>–∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ - <a href="https://t.me/nedthird">@nedthird</a></span>
        </div>
      </div>
    </div>

    <!-- ES Module entry point -->
    <script type="module" src="js/index.js"></script>
</body>
</html>
