<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>–û —Ö–æ–±–±–∏—Ç–∞—Ö ‚Äî –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–∏–≥–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self';
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
      font-src 'self' https://fonts.gstatic.com data:;
      img-src 'self' data: blob:;
      media-src 'self' data:;
      connect-src 'self';
      frame-ancestors 'none';
      base-uri 'self';
      form-action 'none';
    ">

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter&family=Roboto&family=Open+Sans&family=Merriweather&family=Libre+Baskerville&display=swap"
      rel="stylesheet"
    >

    <!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ -->
    <link rel="preload" fetchpriority="high" as="image" href="images/backgrounds/bg-cover.webp" type="image/webp" media="(min-width: 769px)">
    <link rel="preload" fetchpriority="high" as="image" href="images/backgrounds/bg-cover-mobile.webp" type="image/webp" media="(max-width: 768px)">
    <link rel="preload" href="fonts/tolkiencyr.woff2" as="font" crossorigin="anonymous">

    <!-- –ì–ª–∞–≤–Ω—ã–π CSS (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏) -->
    <link rel="stylesheet" href="css/index.css">
  </head>

  <body data-debug="false" data-screen="bookshelf">
    <!-- Skip navigation -->
    <a class="skip-link" href="#book">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–Ω–∏–≥–µ</a>

    <!-- –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–ª–∞–≤ (–¥–≤–∞ —Å–ª–æ—è –¥–ª—è –∫—Ä–æ—Å—Å—Ñ–µ–π–¥–∞) -->
    <div class="chapter-bg">
      <div class="bg" data-active="false"></div>
      <div class="bg" data-active="false"></div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏ -->
    <div class="debug-info" id="debugInfo">
      <div>State: <span id="debugState">-</span></div>
      <div>Pages: <span id="debugTotal">0</span></div>
      <div>Current: <span id="debugCurrent">0</span></div>
      <div>Cache: <span id="debugCache">0</span></div>
      <div>Memory: <span id="debugMemory">-</span></div>
      <div>Listeners: <span id="debugListeners">0</span></div>
    </div>

    <!-- Error message –≤ HTML-->
    <div class="error-message" id="errorMessage" hidden role="alert">
      <span id="errorText"></span>
    </div>

    <!-- Screen reader announcements (visually hidden) -->
    <div id="sr-announcer" class="sr-only" aria-live="polite" aria-atomic="true" role="status"></div>

    <!-- –ö–Ω–∏–∂–Ω–∞—è –ø–æ–ª–∫–∞ (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω) -->
    <div class="bookshelf-screen" id="bookshelf-screen" hidden>
      <div class="bookshelf-header">
        <h1 class="bookshelf-title">–ö–Ω–∏–∂–Ω–∞—è –ø–æ–ª–∫–∞</h1>
        <span class="bookshelf-subtitle" id="bookshelf-subtitle"></span>
      </div>
      <div class="bookshelf-shelves" id="bookshelf-shelves"></div>
      <div class="bookshelf-actions" id="bookshelf-actions">
        <button type="button" class="bookshelf-add-btn" data-action="add-book" aria-label="–°–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          –°–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É
        </button>
      </div>
      <div class="bookshelf-empty" id="bookshelf-empty" hidden>
        <div class="bookshelf-empty-icon">üìö</div>
        <div class="bookshelf-empty-text">–ö–Ω–∏–≥–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</div>
        <button type="button" class="bookshelf-add-btn" data-action="add-book" aria-label="–°–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          –°–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É
        </button>
      </div>
      <div class="bookshelf-mode-selector" id="bookshelf-mode-selector" hidden>
        <div class="bookshelf-mode-header">
          <button type="button" class="bookshelf-mode-back" data-action="back-to-shelf" aria-label="–ù–∞–∑–∞–¥ –∫ –ø–æ–ª–∫–µ">
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
              <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
            –ù–∞–∑–∞–¥
          </button>
          <h2 class="bookshelf-mode-title">–ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É?</h2>
          <p class="bookshelf-mode-desc">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± ‚Äî –≤—ã –≤—Å–µ–≥–¥–∞ —Å–º–æ–∂–µ—Ç–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</p>
        </div>
        <div class="bookshelf-mode-cards">
          <button type="button" class="bookshelf-mode-card" data-mode="upload">
            <div class="bookshelf-mode-card-icon">
              <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true">
                <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
              </svg>
            </div>
            <div class="bookshelf-mode-card-title">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</div>
            <div class="bookshelf-mode-card-desc">EPUB, FB2, DOCX, DOC, TXT ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–ª–∞–≤</div>
          </button>
          <button type="button" class="bookshelf-mode-card" data-mode="manual">
            <div class="bookshelf-mode-card-icon">
              <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true">
                <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
              </svg>
            </div>
            <div class="bookshelf-mode-card-title">–°–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é</div>
            <div class="bookshelf-mode-card-desc">–û–±–ª–æ–∂–∫–∞, –≥–ª–∞–≤—ã, —Ñ–æ–Ω—ã ‚Äî –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å</div>
          </button>
          <button type="button" class="bookshelf-mode-card" data-mode="album">
            <div class="bookshelf-mode-card-icon">
              <svg viewBox="0 0 24 24" width="32" height="32" aria-hidden="true">
                <path fill="currentColor" d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"/>
              </svg>
            </div>
            <div class="bookshelf-mode-card-title">–§–æ—Ç–æ–∞–ª—å–±–æ–º</div>
            <div class="bookshelf-mode-card-desc">–†–∞—Å–∫–ª–∞–¥–∫–∏, —Ñ–æ—Ç–æ, –ø–æ–¥–ø–∏—Å–∏ ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä</div>
          </button>
        </div>
      </div>
    </div>

    <main class="scene">
      <div class="book-wrap" data-state="closed" id="book-wrap">
        <div
          class="book"
          data-state="closed"
          id="book"
          role="region"
          aria-label="–ö–Ω–∏–≥–∞"
        >
          <!-- –û–±–ª–æ–∂–∫–∞ -->
          <div class="cover" id="cover" tabindex="0" role="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–≥—É">
            <div class="cover-front">
              <h1><span>–û —Ö–æ–±–±–∏—Ç–∞—Ö</span> <span>–î–∂.–†.–†.–¢–æ–ª–∫–∏–Ω</span></h1>
            </div>
            <div class="cover-back"></div>
          </div>

          <!-- –ö—Ä–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü -->
          <div class="pages-edge" aria-hidden="true"></div>

          <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (A-–±—É—Ñ–µ—Ä) -->
          <div class="page" data-side="left" data-active="true" id="leftA">
            <div class="page-inner"></div>
          </div>
          <div class="page" data-side="right" data-active="true" id="rightA" aria-live="polite">
            <div class="page-inner"></div>
          </div>

          <!-- –ë—É—Ñ–µ—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (B-–±—É—Ñ–µ—Ä) -->
          <div class="page" data-side="left" data-buffer="true" id="leftB" aria-hidden="true">
            <div class="page-inner"></div>
          </div>
          <div class="page" data-side="right" data-buffer="true" id="rightB" aria-hidden="true">
            <div class="page-inner"></div>
          </div>

          <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏—Å—Ç -->
          <div class="sheet" id="sheet" aria-hidden="true">
            <div class="side" data-face="front" id="sheetFront"></div>
            <div class="side" data-face="back" id="sheetBack"></div>
          </div>

          <div class="flip-shadow" id="flipShadow"></div>

          <!-- –ó–æ–Ω—ã –∑–∞—Ö–≤–∞—Ç–∞ –¥–ª—è drag
            –í debug —Ä–µ–∂–∏–º–µ ([data-debug="true"]) –±—É–¥—É—Ç –≤–∏–¥–Ω—ã -->
          <div class="corner-zone top-right" data-dir="next" aria-hidden="true"></div>
          <div class="corner-zone bottom-right" data-dir="next" aria-hidden="true"></div>
          <div class="corner-zone top-left" data-dir="prev" aria-hidden="true"></div>
          <div class="corner-zone bottom-left" data-dir="prev" aria-hidden="true"></div>

          <!-- Loading overlay —Å hidden –∞—Ç—Ä–∏–±—É—Ç–æ–º -->
          <div class="loading-overlay" id="loadingOverlay" hidden role="status" aria-live="polite">
            <div class="loading-spinner" aria-hidden="true"><span></span></div>
            <div class="loading-progress" id="loadingProgress">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
          </div>

        </div>
      </div>

      <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
      <aside class="controls" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–æ–π">
        <!-- Navigation Pod - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="navigation-pod">
          <div class="nav-row">
            <button class="nav-btn nav-prev" type="button" id="prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
              <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
              </svg>
            </button>

            <div class="nav-center">
              <span class="page-counter" role="status" aria-live="polite" aria-label="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1">
                <span id="current-page">1</span>
                <span class="page-separator" aria-hidden="true">/</span>
                <span id="total-pages">1</span>
              </span>
              <button class="toc-btn" type="button" id="tocBtn" aria-label="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ">
                <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                </svg>
              </button>
            </div>

            <button class="nav-btn nav-next" type="button" id="next" aria-label="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
              <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
              </svg>
            </button>
          </div>

          <div class="progress-bar-container">
            <div class="progress-bar" id="reading-progress" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è"></div>
          </div>

          <div class="nav-actions">
            <button class="back-to-shelf-btn" type="button" id="backToShelfBtn" aria-label="–ù–∞–∑–∞–¥ –∫ –∫–Ω–∏–∂–Ω–æ–π –ø–æ–ª–∫–µ">
              <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/>
              </svg>
              –ö –ø–æ–ª–∫–µ
            </button>
            <button class="continue-btn" type="button" id="continueBtn" hidden>
              <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h4v2l3-3-3-3v2zm-2 6H9v-2h4v-2l3 3-3 3v-2z"/>
              </svg>
              –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
            </button>
            <label class="settings-toggle">
              <input class="settings-checkbox" type="checkbox" id="settings-checkbox" aria-label="–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
              </svg>
              <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </label>
          </div>
        </div>

        <div class="settings" role="group" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á—Ç–µ–Ω–∏—è">
          <!-- Settings Pod - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è -->
          <div class="settings-pod">
            <!-- –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ - Stepper -->
            <div class="settings-section" data-setting="fontSize">
              <div class="settings-section-header">
                <svg class="settings-icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"/>
                </svg>
                <span>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</span>
              </div>
              <div class="font-size-stepper">
                <button class="stepper-btn" type="button" id="decrease" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä">‚àí</button>
                <span class="stepper-value" id="font-size-value" role="status" aria-live="polite" aria-label="–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞">18</span>
                <button class="stepper-btn" type="button" id="increase" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä">+</button>
              </div>
            </div>

            <!-- –¢–µ–º–∞ - Segmented Control -->
            <div class="settings-section" data-setting="theme">
              <div class="settings-section-header">
                <svg class="settings-icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
                <span>–¢–µ–º–∞</span>
              </div>
              <div class="theme-segmented" role="radiogroup" aria-label="–í—ã–±–æ—Ä —Ç–µ–º—ã">
                <button class="theme-segment" type="button" data-theme="light" data-active="true" aria-checked="true" role="radio">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
                  </svg>
                  <span>–°–≤–µ—Ç–ª–∞—è</span>
                </button>
                <button class="theme-segment" type="button" data-theme="dark" role="radio" aria-checked="false">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
                  </svg>
                  <span>–¢—ë–º–Ω–∞—è</span>
                </button>
                <button class="theme-segment" type="button" data-theme="bw" role="radio" aria-checked="false">
                  <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18V4c4.41 0 8 3.59 8 8s-3.59 8-8 8z"/>
                  </svg>
                  <span>–ß/–ë</span>
                </button>
              </div>
            </div>

            <!-- –®—Ä–∏—Ñ—Ç - –æ—Å—Ç–∞–≤–ª—è–µ–º Select -->
            <div class="settings-section" data-setting="font">
              <div class="settings-section-header">
                <svg class="settings-icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M9.93 13.5h4.14L12 7.98 9.93 13.5zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z"/>
                </svg>
                <span>–®—Ä–∏—Ñ—Ç</span>
              </div>
              <select class="font-select-modern" id="font-select" aria-label="–í—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞">
                <option value="georgia">Georgia</option>
                <option value="merriweather">Merriweather</option>
                <option value="libre-baskerville">Libre Baskerville</option>
                <option value="inter">Inter</option>
                <option value="roboto">Roboto</option>
                <option value="open-sans">Open Sans</option>
              </select>
            </div>

            <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º -->
            <div class="settings-section" data-setting="fullscreen">
              <button class="fullscreen-btn" type="button" id="fullscreen-btn" aria-label="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º">
                <svg class="fullscreen-icon fullscreen-enter" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                </svg>
                <svg class="fullscreen-icon fullscreen-exit" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
                </svg>
                <span class="fullscreen-text-enter">–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
                <span class="fullscreen-text-exit">–í—ã–π—Ç–∏</span>
              </button>
            </div>

            <!-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA) -->
            <div class="settings-section" id="install-section" hidden>
              <button class="install-btn" type="button" id="install-btn" aria-label="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ">
                <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2l4-4h-3V7h-2v6H8l4 4z"/>
                </svg>
                <span>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</span>
              </button>
            </div>
          </div>

          <!-- Audio Control Pod - –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –∑–≤—É–∫–∞ -->
          <div class="audio-pod">
            <!-- –°–µ–∫—Ü–∏—è –∑–≤—É–∫–∞ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è -->
            <div class="audio-section" data-setting="sound">
              <div class="audio-section-header">
                <svg class="audio-icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14H9c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1h6c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1z"/>
                </svg>
                <span>–ü–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–µ</span>
              </div>
              <div class="audio-row">
                <label class="toggle-switch">
                  <input type="checkbox" id="sound-toggle" checked aria-label="–ó–≤—É–∫ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è">
                  <span class="toggle-slider"></span>
                </label>
                <div class="volume-control" id="page-volume-control">
                  <svg class="vol-icon vol-mute" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                    <path fill="currentColor" d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                  </svg>
                  <input
                    class="volume-slider"
                    type="range"
                    id="volume-slider"
                    min="0"
                    max="100"
                    value="30"
                    aria-label="–ì—Ä–æ–º–∫–æ—Å—Ç—å –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è"
                  >
                  <svg class="vol-icon vol-max" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                    <path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                  </svg>
                </div>
              </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã—Ö –∑–≤—É–∫–æ–≤ -->
            <div class="audio-section" data-setting="ambient">
              <div class="audio-section-header">
                <svg class="audio-icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                </svg>
                <span>–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞</span>
              </div>
              <div class="ambient-pills" role="radiogroup" aria-label="–í—ã–±–æ—Ä —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏">
                <!-- Pills –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ CONFIG.AMBIENT -->
              </div>
              <div class="volume-control ambient-volume-row" id="ambient-volume-wrapper">
                <svg class="vol-icon vol-mute" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                </svg>
                <input
                  class="volume-slider"
                  type="range"
                  id="ambient-volume"
                  min="0"
                  max="100"
                  value="50"
                  aria-label="–ì—Ä–æ–º–∫–æ—Å—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã"
                >
                <svg class="vol-icon vol-max" viewBox="0 0 24 24" width="16" height="16" aria-hidden="true" focusable="false">
                  <path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </main>

    <!-- Install prompt (PWA) ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS show/hide -->
    <div class="install-prompt" id="install-prompt" role="dialog" aria-labelledby="install-prompt-title" hidden>
      <div class="install-prompt__icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="32" height="32">
          <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2l4-4h-3V7h-2v6H8l4 4z"/>
        </svg>
      </div>
      <div class="install-prompt__content">
        <div class="install-prompt__title" id="install-prompt-title">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
        <div class="install-prompt__text">–ß–∏—Ç–∞–π—Ç–µ –∫–Ω–∏–≥—É –æ—Ñ–ª–∞–π–Ω —Å —É–¥–æ–±–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º</div>
      </div>
      <div class="install-prompt__actions">
        <button class="install-prompt__btn install-prompt__btn--dismiss" type="button" aria-label="–ù–µ —Å–µ–π—á–∞—Å">–ü–æ–∑–∂–µ</button>
        <button class="install-prompt__btn install-prompt__btn--install" type="button">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      </div>
      <button class="install-prompt__close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
    </div>

    <!-- Offline indicator ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ -->
    <div class="offline-indicator" id="offline-indicator" role="status" aria-live="polite" hidden>
      <span class="offline-indicator__icon" aria-hidden="true">üìñ</span>
      <span class="offline-indicator__text">–†–µ–∂–∏–º –æ—Ñ–ª–∞–π–Ω</span>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         TEMPLATES
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <!-- –ü–æ–ª–∫–∞ —Å –∫–Ω–∏–≥–∞–º–∏ -->
    <template id="tmpl-bookshelf-shelf">
      <div class="bookshelf-shelf">
        <div class="bookshelf-books"></div>
        <div class="bookshelf-plank"></div>
      </div>
    </template>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–Ω–∏–≥–∏ –Ω–∞ –ø–æ–ª–∫–µ -->
    <template id="tmpl-bookshelf-book">
      <div class="bookshelf-book-wrapper">
        <button class="bookshelf-book" type="button">
          <div class="bookshelf-book-cover">
            <div class="bookshelf-book-frame"></div>
            <span class="bookshelf-book-title"></span>
            <span class="bookshelf-book-author"></span>
          </div>
          <div class="bookshelf-book-shadow"></div>
        </button>
        <div class="bookshelf-book-menu" hidden>
          <button class="bookshelf-menu-item" data-book-action="read" type="button">
            <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
              <path fill="currentColor" d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"/>
            </svg>
            –ß–∏—Ç–∞—Ç—å
          </button>
          <button class="bookshelf-menu-item" data-book-action="edit" type="button">
            <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
              <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
          </button>
          <button class="bookshelf-menu-item bookshelf-menu-item--danger" data-book-action="delete" type="button">
            <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
              <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
            –£–¥–∞–ª–∏—Ç—å
          </button>
        </div>
      </div>
    </template>

    <!-- –ö–Ω–æ–ø–∫–∞ ambient-–∑–≤—É–∫–∞ -->
    <template id="tmpl-ambient-pill">
      <button type="button" class="ambient-pill" role="radio">
        <span class="ambient-pill-icon"></span>
        <span class="ambient-pill-label"></span>
      </button>
    </template>

    <!-- ES Module entry point -->
    <script type="module" src="js/index.js"></script>
  </body>
</html>
