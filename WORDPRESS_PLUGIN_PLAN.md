# –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ Flipbook –≤ WordPress-–ø–ª–∞–≥–∏–Ω

> –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤–ø–µ—Ä–≤—ã–µ.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
2. [–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–ª–∞–≥–∏–Ω–∞](#2-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–ø–ª–∞–≥–∏–Ω–∞)
3. [–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞](#3-–≥–ª–∞–≤–Ω—ã–π-—Ñ–∞–π–ª-–ø–ª–∞–≥–∏–Ω–∞)
4. [–°–±–æ—Ä–∫–∞ JS/CSS –∞—Å—Å–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Vite](#4-—Å–±–æ—Ä–∫–∞-jscss-–∞—Å—Å–µ—Ç–æ–≤-—á–µ—Ä–µ–∑-vite)
5. [–ê–¥–∞–ø—Ç–∞—Ü–∏—è JavaScript –ø–æ–¥ WordPress](#5-–∞–¥–∞–ø—Ç–∞—Ü–∏—è-javascript-–ø–æ–¥-wordpress)
6. [–ê–¥–∞–ø—Ç–∞—Ü–∏—è CSS –ø–æ–¥ WordPress](#6-–∞–¥–∞–ø—Ç–∞—Ü–∏—è-css-–ø–æ–¥-wordpress)
7. [HTML-—Ä–∞–∑–º–µ—Ç–∫–∞: –æ—Ç index.html –∫ PHP-—à–∞–±–ª–æ–Ω—É](#7-html-—Ä–∞–∑–º–µ—Ç–∫–∞-–æ—Ç-indexhtml-–∫-php-—à–∞–±–ª–æ–Ω—É)
8. [Custom Post Type –¥–ª—è –≥–ª–∞–≤](#8-custom-post-type-–¥–ª—è-–≥–ª–∞–≤)
9. [–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∞–¥–º–∏–Ω–∫–µ](#9-—Å—Ç—Ä–∞–Ω–∏—Ü–∞-–Ω–∞—Å—Ç—Ä–æ–µ–∫-–≤-–∞–¥–º–∏–Ω–∫–µ)
10. [Shortcode –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∫–Ω–∏–≥–∏](#10-shortcode-–¥–ª—è-–≤—Å—Ç–∞–≤–∫–∏-–∫–Ω–∏–≥–∏)
11. [Gutenberg-–±–ª–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)](#11-gutenberg-–±–ª–æ–∫-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
12. [–†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏](#12-—Ä–∞–±–æ—Ç–∞-—Å–æ-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏-—Ñ–∞–π–ª–∞–º–∏)
13. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#13-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
14. [–†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏](#14-—Ä–µ—à–µ–Ω–∏–µ-—Ç–∏–ø–∏—á–Ω—ã—Ö-–ø—Ä–æ–±–ª–µ–º-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
15. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#15-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
16. [–£–ø–∞–∫–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ](#16-—É–ø–∞–∫–æ–≤–∫–∞-–∏-—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ)

---

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ó–∞—á–µ–º | –ì–¥–µ –≤–∑—è—Ç—å |
|---|---|---|
| **–õ–æ–∫–∞–ª—å–Ω—ã–π WordPress** | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | [LocalWP](https://localwp.com/) (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±) –∏–ª–∏ Docker |
| **Node.js >= 18** | –°–±–æ—Ä–∫–∞ JS/CSS –∞—Å—Å–µ—Ç–æ–≤ | [nodejs.org](https://nodejs.org/) |
| **–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä** | –ö–æ–¥ | VS Code, PhpStorm –∏ —Ç.–¥. |
| **PHP >= 7.4** | –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø–ª–∞–≥–∏–Ω–∞ | –í—Ö–æ–¥–∏—Ç –≤ LocalWP |
| **Git** | –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π | [git-scm.com](https://git-scm.com/) |

### –®–∞–≥ –∑–∞ —à–∞–≥–æ–º

1. **–£—Å—Ç–∞–Ω–æ–≤–∏ LocalWP**
   - –°–∫–∞—á–∞–π —Å [localwp.com](https://localwp.com/), —É—Å—Ç–∞–Ω–æ–≤–∏
   - –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Å–∞–π—Ç: –Ω–∞–∂–º–∏ ¬´+¬ª ‚Üí –≤—ã–±–µ—Ä–∏ –∏–º—è (–Ω–∞–ø—Ä. `flipbook-test`) ‚Üí —Å–æ–∑–¥–∞–π
   - –ó–∞–ø–æ–º–Ω–∏ –ø—É—Ç—å –∫ —Å–∞–π—Ç—É, –æ–±—ã—á–Ω–æ: `~/Local Sites/flipbook-test/`

2. **–ù–∞–π–¥–∏ –ø–∞–ø–∫—É –ø–ª–∞–≥–∏–Ω–æ–≤**
   ```
   ~/Local Sites/flipbook-test/app/public/wp-content/plugins/
   ```

3. **–°–æ–∑–¥–∞–π –ø–∞–ø–∫—É –ø–ª–∞–≥–∏–Ω–∞**
   ```bash
   cd ~/Local\ Sites/flipbook-test/app/public/wp-content/plugins/
   mkdir flipbook-reader
   cd flipbook-reader
   ```

4. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π Git –∏ npm**
   ```bash
   git init
   npm init -y
   ```

5. **–°–∫–æ–ø–∏—Ä—É–π –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ Flipbook** –≤ –ø–æ–¥–ø–∞–ø–∫—É `src/`:
   ```bash
   mkdir src
   # –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ flipbook-–ø—Ä–æ–µ–∫—Ç–∞ –≤ src/
   cp -r /path/to/flipbook/js src/
   cp -r /path/to/flipbook/css src/
   cp -r /path/to/flipbook/public src/
   ```

---

## 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–ª–∞–≥–∏–Ω–∞

```
flipbook-reader/                     ‚Üê –ö–æ—Ä–µ–Ω—å –ø–ª–∞–≥–∏–Ω–∞
‚îÇ
‚îú‚îÄ‚îÄ flipbook-reader.php              ‚Üê –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞ (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
‚îú‚îÄ‚îÄ uninstall.php                    ‚Üê –ö–æ–¥ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞
‚îú‚îÄ‚îÄ readme.txt                       ‚Üê –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è WordPress.org
‚îÇ
‚îú‚îÄ‚îÄ includes/                        ‚Üê PHP-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ class-flipbook-plugin.php    ‚Üê –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø–ª–∞–≥–∏–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ class-flipbook-cpt.php       ‚Üê Custom Post Type ¬´–ì–ª–∞–≤–∞¬ª
‚îÇ   ‚îú‚îÄ‚îÄ class-flipbook-settings.php  ‚Üê –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∞–¥–º–∏–Ω–∫–µ
‚îÇ   ‚îú‚îÄ‚îÄ class-flipbook-shortcode.php ‚Üê Shortcode [flipbook]
‚îÇ   ‚îú‚îÄ‚îÄ class-flipbook-assets.php    ‚Üê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JS/CSS
‚îÇ   ‚îî‚îÄ‚îÄ class-flipbook-rest-api.php  ‚Üê REST API endpoints (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ
‚îú‚îÄ‚îÄ templates/                       ‚Üê PHP-—à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ flipbook-template.php        ‚Üê HTML-—Ä–∞–∑–º–µ—Ç–∫–∞ –∫–Ω–∏–≥–∏ (–∏–∑ index.html)
‚îÇ
‚îú‚îÄ‚îÄ assets/                          ‚Üê –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (git-tracked)
‚îÇ   ‚îú‚îÄ‚îÄ dist/                        ‚Üê –†–µ–∑—É–ª—å—Ç–∞—Ç Vite build
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ flipbook.js              ‚Üê –°–æ–±—Ä–∞–Ω–Ω—ã–π JS-–±–∞–Ω–¥–ª
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ flipbook.css             ‚Üê –°–æ–±—Ä–∞–Ω–Ω—ã–π CSS
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ flipbook.asset.php       ‚Üê –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ sounds/                      ‚Üê –ê—É–¥–∏–æ—Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page-flip.mp3
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cover-flip.mp3
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ambient/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ rain.mp3
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ fireplace.mp3
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ cafe.mp3
‚îÇ   ‚îú‚îÄ‚îÄ images/                      ‚Üê –§–æ–Ω—ã –∏ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ backgrounds/
‚îÇ   ‚îú‚îÄ‚îÄ fonts/                       ‚Üê –®—Ä–∏—Ñ—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tolkiencyr.woff2
‚îÇ   ‚îî‚îÄ‚îÄ icons/                       ‚Üê –ò–∫–æ–Ω–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
‚îÇ
‚îú‚îÄ‚îÄ src/                             ‚Üê –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ (–ù–ï –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)
‚îÇ   ‚îú‚îÄ‚îÄ js/                          ‚Üê –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ JS-–º–æ–¥—É–ª–∏ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
‚îÇ   ‚îú‚îÄ‚îÄ css/                         ‚Üê –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ CSS-—Ñ–∞–π–ª—ã (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
‚îÇ   ‚îî‚îÄ‚îÄ entry.js                     ‚Üê –ù–æ–≤–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è WP
‚îÇ
‚îú‚îÄ‚îÄ blocks/                          ‚Üê Gutenberg-–±–ª–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ flipbook/
‚îÇ       ‚îú‚îÄ‚îÄ block.json
‚îÇ       ‚îú‚îÄ‚îÄ edit.js
‚îÇ       ‚îú‚îÄ‚îÄ save.js
‚îÇ       ‚îî‚îÄ‚îÄ index.js
‚îÇ
‚îú‚îÄ‚îÄ languages/                       ‚Üê –ü–µ—Ä–µ–≤–æ–¥—ã (i18n)
‚îÇ   ‚îî‚îÄ‚îÄ flipbook-reader-ru_RU.po
‚îÇ
‚îú‚îÄ‚îÄ package.json                     ‚Üê Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ vite.config.js                   ‚Üê –ö–æ–Ω—Ñ–∏–≥ —Å–±–æ—Ä–∫–∏ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ .editorconfig
```

### –ó–∞—á–µ–º –∫–∞–∂–¥–∞—è –ø–∞–ø–∫–∞

| –ü–∞–ø–∫–∞/–§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| `flipbook-reader.php` | WordPress —á–∏—Ç–∞–µ—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª, —á—Ç–æ–±—ã —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –ø–ª–∞–≥–∏–Ω |
| `includes/` | –í—Å—è PHP-–ª–æ–≥–∏–∫–∞, —Ä–∞–∑–±–∏—Ç–∞—è –ø–æ –∫–ª–∞—Å—Å–∞–º (–æ–¥–∏–Ω –∫–ª–∞—Å—Å = –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å) |
| `templates/` | HTML-—Ä–∞–∑–º–µ—Ç–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –≤ `index.html`, —Ç–µ–ø–µ—Ä—å –≤ PHP-—à–∞–±–ª–æ–Ω–µ |
| `assets/dist/` | –°–æ–±—Ä–∞–Ω–Ω—ã–µ JS/CSS —Ñ–∞–π–ª—ã ‚Äî –∏–º–µ–Ω–Ω–æ –∏—Ö –ø–æ–¥–∫–ª—é—á–∞–µ—Ç WordPress |
| `src/` | –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ JS/CSS –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –∏—Ö –º–æ–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å |
| `blocks/` | –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å Gutenberg-–±–ª–æ–∫ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ |
| `languages/` | –§–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ |

---

## 3. –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `flipbook-reader.php` –≤ –∫–æ—Ä–Ω–µ –ø–ª–∞–≥–∏–Ω–∞. WordPress –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–ª–∞–≥–∏–Ω –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—é –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞.

### –ß—Ç–æ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª

```php
<?php
/**
 * Plugin Name:       Flipbook Reader
 * Plugin URI:        https://github.com/your-username/flipbook-reader
 * Description:       –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è 3D-—á–∏—Ç–∞–ª–∫–∞ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü.
 * Version:           1.0.0
 * Requires at least: 5.8
 * Requires PHP:      7.4
 * Author:            Your Name
 * Author URI:        https://your-site.com
 * License:           MIT
 * License URI:       https://opensource.org/licenses/MIT
 * Text Domain:       flipbook-reader
 * Domain Path:       /languages
 */

// –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ WP)
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
```

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

| –ü–æ–ª–µ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|---|---|
| `Plugin Name` | –ò–º—è –≤ —Å–ø–∏—Å–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤ WP |
| `Description` | –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥ –∏–º–µ–Ω–µ–º |
| `Version` | –í–µ—Ä—Å–∏—è (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π) |
| `Requires at least` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è WordPress |
| `Requires PHP` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è PHP |
| `Text Domain` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ |
| `Domain Path` | –ü–∞–ø–∫–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ |

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–ª–∞–≥–∏–Ω–∞

```php
// –í–µ—Ä—Å–∏—è –ø–ª–∞–≥–∏–Ω–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à-–±–∞—Å—Ç–∏–Ω–≥–∞ CSS/JS
define( 'FLIPBOOK_VERSION', '1.0.0' );

// –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –ø–ª–∞–≥–∏–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
// –ü—Ä–∏–º–µ—Ä: /var/www/html/wp-content/plugins/flipbook-reader/
define( 'FLIPBOOK_PATH', plugin_dir_path( __FILE__ ) );

// URL –ø–∞–ø–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è CSS/JS –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
// –ü—Ä–∏–º–µ—Ä: https://example.com/wp-content/plugins/flipbook-reader/
define( 'FLIPBOOK_URL', plugin_dir_url( __FILE__ ) );

// –ü—É—Ç—å –∫ —Å–æ–±—Ä–∞–Ω–Ω—ã–º –∞—Å—Å–µ—Ç–∞–º
define( 'FLIPBOOK_ASSETS_URL', FLIPBOOK_URL . 'assets/' );

// –ë–∞–∑–æ–≤–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ –ø–ª–∞–≥–∏–Ω–∞ (–¥–ª—è —Ö—É–∫–æ–≤ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
define( 'FLIPBOOK_BASENAME', plugin_basename( __FILE__ ) );
```

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∫–∞–∂–¥–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞

- **`FLIPBOOK_PATH`** ‚Äî —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∞—Ç—å PHP-—Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ `require_once FLIPBOOK_PATH . 'includes/...'`
- **`FLIPBOOK_URL`** ‚Äî —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∞—Ç—å CSS/JS —á–µ—Ä–µ–∑ `wp_enqueue_script(... FLIPBOOK_URL . 'assets/dist/...')`
- **`FLIPBOOK_VERSION`** ‚Äî —á—Ç–æ–±—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–ª —Å–≤–µ–∂–∏–µ —Ñ–∞–π–ª—ã, –∞ –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–ø—É—Å–∫

```php
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö PHP-–∫–ª–∞—Å—Å–æ–≤
require_once FLIPBOOK_PATH . 'includes/class-flipbook-plugin.php';
require_once FLIPBOOK_PATH . 'includes/class-flipbook-cpt.php';
require_once FLIPBOOK_PATH . 'includes/class-flipbook-settings.php';
require_once FLIPBOOK_PATH . 'includes/class-flipbook-shortcode.php';
require_once FLIPBOOK_PATH . 'includes/class-flipbook-assets.php';

// –ó–∞–ø—É—Å–∫ –ø–ª–∞–≥–∏–Ω–∞
function flipbook_reader_init() {
    $plugin = new Flipbook_Plugin();
    $plugin->run();
}
add_action( 'plugins_loaded', 'flipbook_reader_init' );

// –•—É–∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞
register_activation_hook( __FILE__, array( 'Flipbook_Plugin', 'activate' ) );

// –•—É–∫ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ ‚Äî –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–∞
register_deactivation_hook( __FILE__, array( 'Flipbook_Plugin', 'deactivate' ) );
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Ö—É–∫–∏ WordPress (–∫–ª—é—á–µ–≤–æ–µ –ø–æ–Ω—è—Ç–∏–µ)

**–•—É–∫** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π ¬´–≤—Å—Ç—Ä–æ–∏—Ç—å¬ª —Å–≤–æ–π –∫–æ–¥ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–∞–±–æ—Ç—ã WordPress. –î–≤–∞ –≤–∏–¥–∞:
- **Action** (`add_action`) ‚Äî ¬´—Å–¥–µ–ª–∞–π —á—Ç–æ-—Ç–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç¬ª. –ü—Ä–∏–º–µ—Ä: `plugins_loaded` ‚Äî ¬´–∫–æ–≥–¥–∞ –≤—Å–µ –ø–ª–∞–≥–∏–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –∑–∞–ø—É—Å—Ç–∏ –º–æ–π –∫–æ–¥¬ª.
- **Filter** (`add_filter`) ‚Äî ¬´–∏–∑–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã–µ, –ø—Ä–æ—Ö–æ–¥—è—â–∏–µ —á–µ—Ä–µ–∑ —ç—Ç—É —Ç–æ—á–∫—É¬ª. –ü—Ä–∏–º–µ—Ä: `the_content` ‚Äî ¬´–∏–∑–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å—Ç–∞ –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º¬ª.

```
WordPress –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
    ‚Üì
–•—É–∫ 'plugins_loaded' ‚Üí —Ç—É—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞—à –ø–ª–∞–≥–∏–Ω
    ‚Üì
–•—É–∫ 'init' ‚Üí —Ç—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è Custom Post Type
    ‚Üì
–•—É–∫ 'wp_enqueue_scripts' ‚Üí —Ç—É—Ç –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è CSS/JS
    ‚Üì
–•—É–∫ 'the_content' / Shortcode ‚Üí —Ç—É—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞—à–∞ –∫–Ω–∏–≥–∞
    ‚Üì
HTML –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä
```

---

## 4. –°–±–æ—Ä–∫–∞ JS/CSS –∞—Å—Å–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Vite

### –ü—Ä–æ–±–ª–µ–º–∞

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Vite –¥–ª—è dev-—Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å–±–æ—Ä–∫–∏. WordPress –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Vite. –ù—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥–∫–ª—é—á–∞–ª—Å—è —á–µ—Ä–µ–∑ WordPress.

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ Vite-–∫–æ–Ω—Ñ–∏–≥–µ

–°–æ–∑–¥–∞–π **–Ω–æ–≤—ã–π** `vite.config.js` –≤ –∫–æ—Ä–Ω–µ –ø–ª–∞–≥–∏–Ω–∞ (–Ω–µ –ø—É—Ç–∞—Ç—å —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º):

```javascript
// flipbook-reader/vite.config.js

import { defineConfig } from 'vite';
import { resolve } from 'path';

export default defineConfig({
  // –£–±–∏—Ä–∞–µ–º dev-server ‚Äî –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è WP-–ø–ª–∞–≥–∏–Ω–∞
  // (–∏—Å–ø–æ–ª—å–∑—É–µ–º WP-—Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ LocalWP)

  build: {
    // –ö—É–¥–∞ —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏
    outDir: resolve(__dirname, 'assets/dist'),

    // –ù–ï –æ—á–∏—â–∞—Ç—å –ø–∞–ø–∫—É (—Ç–∞–º –º–æ–≥—É—Ç –±—ã—Ç—å –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã)
    emptyOutDir: true,

    // –§–æ—Ä–º–∞—Ç –±–∞–Ω–¥–ª–∞
    lib: {
      // –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ ‚Äî –Ω–∞—à –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
      entry: resolve(__dirname, 'src/entry.js'),
      // –ò–º—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞ —Å–ª—É—á–∞–π UMD-—Å–±–æ—Ä–∫–∏)
      name: 'FlipbookReader',
      // –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤
      formats: ['iife'], // IIFE ‚Äî —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –¥–ª—è WordPress
      // –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
      fileName: () => 'flipbook.js',
    },

    rollupOptions: {
      output: {
        // CSS –±—É–¥–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
        assetFileNames: (assetInfo) => {
          if (assetInfo.name?.endsWith('.css')) {
            return 'flipbook.css';
          }
          return '[name][extname]';
        },
      },
    },

    // –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: false, // –û—Å—Ç–∞–≤–ª—è–µ–º console –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (—É–±–µ—Ä—ë–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
        drop_debugger: true,
      },
    },

    // Source maps –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–æ—Ç–∫–ª—é—á–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
    sourcemap: true,
  },

  // –ê–ª–∏–∞—Å—ã –ø—É—Ç–µ–π (—Ç–∞–∫–∏–µ –∂–µ, –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ)
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src/js'),
      '@utils': resolve(__dirname, 'src/js/utils'),
      '@managers': resolve(__dirname, 'src/js/managers'),
      '@core': resolve(__dirname, 'src/js/core'),
      '@css': resolve(__dirname, 'src/css'),
    },
  },
});
```

### –ü–æ—á–µ–º—É IIFE, –∞ –Ω–µ ES Modules

WordPress –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã —á–µ—Ä–µ–∑ `<script src="...">` (–±–µ–∑ `type="module"`). –§–æ—Ä–º–∞—Ç IIFE (Immediately Invoked Function Expression) –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤–µ—Å—å –∫–æ–¥ –≤ —Å–∞–º–æ–≤—ã–∑—ã–≤–∞—é—â—É—é—Å—è —Ñ—É–Ω–∫—Ü–∏—é ‚Äî –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π `<script>` –∏ –Ω–µ –∑–∞–≥—Ä—è–∑–Ω—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏.

```javascript
// ES Module (–æ—Ä–∏–≥–∏–Ω–∞–ª) ‚Äî —Ç—Ä–µ–±—É–µ—Ç type="module"
import { BookController } from './core/BookController.js';

// IIFE (–¥–ª—è WordPress) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π <script>
(function() {
  // –í–µ—Å—å –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏, –Ω–∏—á–µ–≥–æ –Ω–µ —É—Ç–µ–∫–∞–µ—Ç –Ω–∞—Ä—É–∂—É
  var BookController = /* ... */;
})();
```

### –°–∫—Ä–∏–ø—Ç—ã –≤ package.json

```json
{
  "scripts": {
    "build": "vite build",
    "watch": "vite build --watch",
    "dev": "vite build --watch --sourcemap"
  }
}
```

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –∑–∞–ø—É—â–µ–Ω LocalWP (WordPress-—Å–µ—Ä–≤–µ—Ä)
# –¢–µ—Ä–º–∏–Ω–∞–ª 2:
cd ~/Local\ Sites/flipbook-test/app/public/wp-content/plugins/flipbook-reader/
npm run watch
# Vite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
# –û–±–Ω–æ–≤–ª—è–µ—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É WordPress –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Äî –≤–∏–¥–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

---

## 5. –ê–¥–∞–ø—Ç–∞—Ü–∏—è JavaScript –ø–æ–¥ WordPress

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `js/index.js` –¥–µ–ª–∞–µ—Ç —Ç—Ä–∏ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã –≤ WordPress:
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker (PWA) ‚Äî **—É–±–∏—Ä–∞–µ–º**
2. –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA ‚Äî **—É–±–∏—Ä–∞–µ–º**
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è BookController ‚Äî **–æ—Å—Ç–∞–≤–ª—è–µ–º, –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º**

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/entry.js`:

```javascript
// src/entry.js ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è WordPress-–≤–µ—Ä—Å–∏–∏

// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å—Ç–∏–ª–∏ (Vite —Å–æ–±–µ—Ä—ë—Ç –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π CSS-—Ñ–∞–π–ª)
import './css/index.css';

// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
import { BookController } from './js/core/BookController.js';

// WordPress –ø–µ—Ä–µ–¥–∞—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ wp_localize_script
// –û–Ω–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
const wpConfig = window.flipbookConfig || {};

let app = null;

async function init() {
  try {
    app = new BookController(wpConfig);
    await app.init();
  } catch (error) {
    console.error('[Flipbook] Initialization failed:', error);
  }
}

function cleanup() {
  if (app) {
    app.destroy();
    app = null;
  }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–≥–¥–∞ DOM –≥–æ—Ç–æ–≤
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}

window.addEventListener('beforeunload', cleanup);
```

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è config.js

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `config.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `import.meta.env.BASE_URL` (Vite) –¥–ª—è –ø—É—Ç–µ–π. –í WordPress –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –¥—Ä—É–≥–∏–µ –∏ –∑–∞–¥–∞—é—Ç—Å—è –∏–∑ PHP.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/js/config.js`:**

```javascript
// –ë–´–õ–û (Vite):
const BASE_URL = import.meta.env.BASE_URL || '/';

// –°–¢–ê–õ–û (WordPress):
// WordPress –ø–µ—Ä–µ–¥–∞—ë—Ç –±–∞–∑–æ–≤—ã–π URL —á–µ—Ä–µ–∑ wp_localize_script
const BASE_URL = (window.flipbookConfig && window.flipbookConfig.baseUrl) || '/';
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ wp_localize_script

–≠—Ç–æ —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ PHP (—Å–µ—Ä–≤–µ—Ä) –≤ JavaScript (–±—Ä–∞—É–∑–µ—Ä). WordPress —Å–æ–∑–¥–∞—ë—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é JS-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –æ–±—ä–µ–∫—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö.

**PHP-—Å—Ç–æ—Ä–æ–Ω–∞:**
```php
wp_localize_script('flipbook-js', 'flipbookConfig', array(
    'baseUrl'  => FLIPBOOK_ASSETS_URL,
    'ajaxUrl'  => admin_url('admin-ajax.php'),
    'nonce'    => wp_create_nonce('flipbook_nonce'),
    'chapters' => $chapters_data, // –ú–∞—Å—Å–∏–≤ –≥–ª–∞–≤ –∏–∑ –ë–î
    'settings' => $settings,      // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
));
```

**JS-—Å—Ç–æ—Ä–æ–Ω–∞:**
```javascript
// WordPress –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç:
// window.flipbookConfig = { baseUrl: '...', ajaxUrl: '...', ... }
console.log(flipbookConfig.baseUrl);
// ‚Üí "https://example.com/wp-content/plugins/flipbook-reader/assets/"
```

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è ContentLoader.js

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π ContentLoader –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≥–ª–∞–≤—ã –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö HTML-—Ñ–∞–π–ª–æ–≤ (`/content/part_1.html`). –í WordPress –∫–æ–Ω—Ç–µ–Ω—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ Custom Post Type.

**–î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ (–≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω):**

#### –ü–æ–¥—Ö–æ–¥ A: REST API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ì–ª–∞–≤—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ WordPress REST API.

```javascript
// –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ContentLoader
async _fetchWithRetry(url, signal) {
  // url —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –≤–∏–¥–∞:
  // /wp-json/flipbook/v1/chapter/part_1
  const response = await fetch(url, { signal });
  if (!response.ok) throw new Error(`HTTP ${response.status}`);
  const data = await response.json();
  return data.content; // HTML-–∫–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤—ã
}
```

**PHP-—Å—Ç–æ—Ä–æ–Ω–∞ (REST endpoint):**
```php
// includes/class-flipbook-rest-api.php
register_rest_route('flipbook/v1', '/chapter/(?P<id>[a-z0-9_-]+)', array(
    'methods'  => 'GET',
    'callback' => function($request) {
        $chapter_id = $request['id'];
        // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å—Ç –ø–æ slug
        $post = get_page_by_path($chapter_id, OBJECT, 'flipbook_chapter');
        if (!$post) {
            return new WP_Error('not_found', 'Chapter not found', array('status' => 404));
        }
        return array(
            'id'      => $post->post_name,
            'title'   => $post->post_title,
            'content' => apply_filters('the_content', $post->post_content),
        );
    },
    'permission_callback' => '__return_true', // –ü—É–±–ª–∏—á–Ω—ã–π endpoint
));
```

#### –ü–æ–¥—Ö–æ–¥ B: Inline-–¥–∞–Ω–Ω—ã–µ (–ø—Ä–æ—â–µ, –Ω–æ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è)

–í–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ HTML –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

```php
// –í PHP-—à–∞–±–ª–æ–Ω–µ:
<script>
window.flipbookChapters = <?php echo json_encode($chapters_html); ?>;
</script>
```

```javascript
// –í JS:
const content = window.flipbookChapters[chapterId];
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π –ü–æ–¥—Ö–æ–¥ A (REST API) ‚Äî –æ–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è, –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥—Ä—É–∑–∏—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ.

### –ê–¥–∞–ø—Ç–∞—Ü–∏—è SettingsManager.js

–û—Ä–∏–≥–∏–Ω–∞–ª —Ö—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `localStorage`. –î–ª—è WordPress –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

| | localStorage (–æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å) | WordPress user meta |
|---|---|---|
| **–ü–ª—é—Å—ã** | –ü—Ä–æ—Å—Ç–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ |
| **–ú–∏–Ω—É—Å—ã** | –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ | –ù—É–∂–µ–Ω AJAX, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö |
| **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** | –î–ª—è –≥–æ—Å—Ç–µ–≤—ã—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π | –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤—å `localStorage` –∫–∞–∫ –µ—Å—Ç—å ‚Äî —ç—Ç–æ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∏ –æ–Ω–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ `user_meta` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ.

### –£–¥–∞–ª–µ–Ω–∏–µ PWA-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –∏ –∏–º–ø–æ—Ä—Ç—ã –Ω—É–∂–Ω–æ **—É–±—Ä–∞—Ç—å** –∏–∑ WordPress-–≤–µ—Ä—Å–∏–∏, —Ç.–∫. PWA ‚Äî –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤—Å–µ–≥–æ —Å–∞–π—Ç–∞, –∞ –Ω–µ –ø–ª–∞–≥–∏–Ω–∞:

- –£–¥–∞–ª–∏—Ç—å –∏–º–ø–æ—Ä—Ç `virtual:pwa-register` –∏–∑ entry.js
- –£–¥–∞–ª–∏—Ç—å `InstallPrompt.js` (–∏–ª–∏ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å)
- –£–¥–∞–ª–∏—Ç—å `OfflineIndicator.js` (–∏–ª–∏ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å)
- –£–±—Ä–∞—Ç—å `vite-plugin-pwa` –∏–∑ vite.config.js
- –£–±—Ä–∞—Ç—å Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

---

## 6. –ê–¥–∞–ø—Ç–∞—Ü–∏—è CSS –ø–æ–¥ WordPress

### –ü—Ä–æ–±–ª–µ–º–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

WordPress-—Ç–µ–º–∞ —É–∂–µ –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å—Ç–∏–ª–∏. –í–∞—à–∏ —Å—Ç–∏–ª–∏ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å:
- –¢–µ–º–∞ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `body`, `p`, `h1` ‚Äî –∏ —Å–ª–æ–º–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∫–Ω–∏–≥–∏
- –í–∞—à `reset.css` –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—Ç–∏–ª–∏ —Ç–µ–º—ã
- –û–±—â–∏–µ CSS-–∫–ª–∞—Å—Å—ã (`.container`, `.wrapper`) –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å

### –†–µ—à–µ–Ω–∏–µ: CSS-–ø—Ä–µ—Ñ–∏–∫—Å—ã (Namespace)

**–®–∞–≥ 1.** –û–±–µ—Ä–Ω–∏ –≤–µ—Å—å HTML –∫–Ω–∏–≥–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–ª–∞—Å—Å–æ–º:

```html
<div class="flipbook-reader">
  <!-- –í—Å—è —Ä–∞–∑–º–µ—Ç–∫–∞ –∫–Ω–∏–≥–∏ –≤–Ω—É—Ç—Ä–∏ -->
</div>
```

**–®–∞–≥ 2.** –û–±–µ—Ä–Ω–∏ –≤—Å–µ CSS-–ø—Ä–∞–≤–∏–ª–∞ –≤ —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```css
/* –ë–´–õ–û: */
.book { perspective: 1600px; }
.page { background: #fff; }

/* –°–¢–ê–õ–û: */
.flipbook-reader .book { perspective: 1600px; }
.flipbook-reader .page { background: #fff; }
```

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostCSS-–ø–ª–∞–≥–∏–Ω `postcss-prefix-selector`:

```bash
npm install -D postcss-prefix-selector
```

```javascript
// postcss.config.js
module.exports = {
  plugins: [
    require('postcss-prefix-selector')({
      prefix: '.flipbook-reader',
      // –ù–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫ :root (–Ω—É–∂–µ–Ω –¥–ª—è CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
      exclude: [':root', '[data-theme]', '@keyframes', '@font-face'],
    }),
    require('autoprefixer')(),
  ],
};
```

**–®–∞–≥ 3.** CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `:root` –ø–µ—Ä–µ–Ω–µ—Å–∏ –≤ `.flipbook-reader`:

```css
/* –ë–´–õ–û: */
:root {
  --bg-book: #fdfcf8;
  --timing-rotate: 900ms;
}

/* –°–¢–ê–õ–û: */
.flipbook-reader {
  --bg-book: #fdfcf8;
  --timing-rotate: 900ms;
}
```

–≠—Ç–æ –∏–∑–æ–ª–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞.

**–®–∞–≥ 4.** –£–¥–∞–ª–∏ `reset.css` –∏–∑ WordPress-–≤–µ—Ä—Å–∏–∏ ‚Äî WordPress —É–∂–µ –∏–º–µ–µ—Ç —Å–≤–æ–π reset —á–µ—Ä–µ–∑ —Ç–µ–º—É. –í–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ reset'–∞ –¥–æ–±–∞–≤—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:

```css
.flipbook-reader {
  /* –°–±—Ä–æ—Å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–Ω–∏–≥–∏ */
  box-sizing: border-box;
  line-height: 1.5;
  font-family: Georgia, serif;
}

.flipbook-reader *, .flipbook-reader *::before, .flipbook-reader *::after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}
```

### –¢–µ–º—ã (data-theme)

–û—Ä–∏–≥–∏–Ω–∞–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `[data-theme="dark"]` –Ω–∞ `<body>`. –í WordPress –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å `<body>` ‚Äî –æ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–º–µ.

**–†–µ—à–µ–Ω–∏–µ:** –°—Ç–∞–≤—å `data-theme` –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `.flipbook-reader`:

```css
/* –ë–´–õ–û: */
[data-theme="dark"] { --bg-book: #1a1a1a; }

/* –°–¢–ê–õ–û: */
.flipbook-reader[data-theme="dark"] { --bg-book: #1a1a1a; }
```

```javascript
// –ë–´–õ–û:
document.body.setAttribute('data-theme', theme);

// –°–¢–ê–õ–û:
document.querySelector('.flipbook-reader').setAttribute('data-theme', theme);
```

---

## 7. HTML-—Ä–∞–∑–º–µ—Ç–∫–∞: –æ—Ç index.html –∫ PHP-—à–∞–±–ª–æ–Ω—É

### –ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `index.html` ‚Äî —ç—Ç–æ –ø–æ–ª–Ω—ã–π HTML-–¥–æ–∫—É–º–µ–Ω—Ç (`<html>`, `<head>`, `<body>`). –í WordPress —ç—Ç–æ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ ‚Äî WordPress —Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `<html>`, `<head>`, `<body>` —á–µ—Ä–µ–∑ —Ç–µ–º—É. –ù–∞–º –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ **—Ñ—Ä–∞–≥–º–µ–Ω—Ç**, –∫–æ—Ç–æ—Ä—ã–π –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### –°–æ–∑–¥–∞–Ω–∏–µ PHP-—à–∞–±–ª–æ–Ω–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `templates/flipbook-template.php`. –ü–µ—Ä–µ–Ω–µ—Å–∏ —Ç—É–¥–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `<body>` –∏–∑ `index.html`, —É–±—Ä–∞–≤:

- `<!DOCTYPE html>`, `<html>`, `<head>`, `<body>` ‚Äî —É–∂–µ –µ—Å—Ç—å –≤ —Ç–µ–º–µ
- `<link>` –¥–ª—è CSS ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `wp_enqueue_style`
- `<script>` –¥–ª—è JS ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `wp_enqueue_script`
- `<meta>` —Ç–µ–≥–∏ ‚Äî —É–∂–µ –≤ —Ç–µ–º–µ
- Google Fonts `<link>` ‚Äî –ø–æ–¥–∫–ª—é—á–∏–º —á–µ—Ä–µ–∑ `wp_enqueue_style`
- Preload-—Å—Å—ã–ª–∫–∏ ‚Äî –ø–æ–¥–∫–ª—é—á–∏–º —á–µ—Ä–µ–∑ `wp_head`

### –ü—Ä–∏–º–µ—Ä —à–∞–±–ª–æ–Ω–∞ (—Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏)

```php
<?php
/**
 * –®–∞–±–ª–æ–Ω –∫–Ω–∏–≥–∏ Flipbook.
 *
 * –≠—Ç–æ—Ç —Ñ–∞–π–ª –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ shortcode-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.
 * –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $chapters –∏ $settings –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑–≤–Ω–µ.
 *
 * @var array $chapters ‚Äî —Å–ø–∏—Å–æ–∫ –≥–ª–∞–≤ –∏–∑ Custom Post Type
 * @var array $settings ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
 */

// –ó–∞–ø—Ä–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
if ( ! defined( 'ABSPATH' ) ) exit;
?>

<div class="flipbook-reader" data-theme="light" data-debug="false">

  <!-- –§–æ–Ω –≥–ª–∞–≤—ã (–¥–≤–∞ —Å–ª–æ—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Å–º–µ–Ω—ã) -->
  <div class="chapter-bg" aria-hidden="true">
    <div class="bg" data-active="false"></div>
    <div class="bg" data-active="false"></div>
  </div>

  <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
  <div id="flipbook-errorMessage" class="error-message" hidden role="alert"></div>

  <!-- –ê–Ω–æ–Ω—Å–∞—Ç–æ—Ä –¥–ª—è —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤ -->
  <div id="flipbook-sr-announcer" class="sr-only" aria-live="polite" aria-atomic="true"></div>

  <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ -->
  <main class="scene">
    <div class="book-wrap" data-state="closed">
      <div class="book" role="region" aria-label="<?php esc_attr_e( '–ö–Ω–∏–≥–∞', 'flipbook-reader' ); ?>">

        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–±—É—Ñ–µ—Ä A) -->
        <div id="flipbook-leftA" class="page page--left" data-active="true">
          <div class="page-inner" aria-live="polite"></div>
        </div>
        <div id="flipbook-rightA" class="page page--right" data-active="true">
          <div class="page-inner" aria-live="polite"></div>
        </div>

        <!-- –ë—É—Ñ–µ—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–±—É—Ñ–µ—Ä B) -->
        <div id="flipbook-leftB" class="page page--left" data-buffer="true">
          <div class="page-inner"></div>
        </div>
        <div id="flipbook-rightB" class="page page--right" data-buffer="true">
          <div class="page-inner"></div>
        </div>

        <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏—Å—Ç -->
        <div id="flipbook-sheet" class="sheet">
          <div id="flipbook-sheetFront" class="sheet-side sheet-side--front">
            <div class="page-inner"></div>
          </div>
          <div id="flipbook-sheetBack" class="sheet-side sheet-side--back">
            <div class="page-inner"></div>
          </div>
        </div>

        <!-- –û–±–ª–æ–∂–∫–∞ -->
        <div id="flipbook-cover" class="cover" tabindex="0" role="button"
             aria-label="<?php esc_attr_e( '–û—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–≥—É', 'flipbook-reader' ); ?>">
          <div class="cover-front">
            <h1 class="cover-title"><?php echo esc_html( $settings['book_title'] ?? '–ö–Ω–∏–≥–∞' ); ?></h1>
            <p class="cover-author"><?php echo esc_html( $settings['book_author'] ?? '' ); ?></p>
          </div>
          <div class="cover-back"></div>
        </div>

        <!-- –¢–µ–Ω—å –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è -->
        <div id="flipbook-flipShadow" class="flip-shadow" aria-hidden="true"></div>
        <!-- –ö—Ä–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü -->
        <div class="pages-edge" aria-hidden="true"></div>

        <!-- –ó–æ–Ω—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (—É–≥–ª—ã) -->
        <div class="corner-zone corner-zone--top-right" data-dir="next" aria-hidden="true"></div>
        <div class="corner-zone corner-zone--bottom-right" data-dir="next" aria-hidden="true"></div>
        <div class="corner-zone corner-zone--top-left" data-dir="prev" aria-hidden="true"></div>
        <div class="corner-zone corner-zone--bottom-left" data-dir="prev" aria-hidden="true"></div>
      </div>
    </div>
  </main>

  <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div id="flipbook-loadingOverlay" class="loading-overlay" hidden aria-live="assertive">
    <div class="spinner" aria-hidden="true"></div>
    <p id="flipbook-loadingProgress" class="loading-progress">
      <?php esc_html_e( '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶', 'flipbook-reader' ); ?>
    </p>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
  <aside class="controls" aria-label="<?php esc_attr_e( '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–æ–π', 'flipbook-reader' ); ?>">

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="control-pod navigation-pod">
      <button id="flipbook-prev" class="nav-btn nav-btn--prev"
              aria-label="<?php esc_attr_e( '–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', 'flipbook-reader' ); ?>" disabled>‚Äπ</button>
      <span class="page-counter">
        <span id="flipbook-current-page">0</span>/<span id="flipbook-total-pages">0</span>
      </span>
      <button id="flipbook-next" class="nav-btn nav-btn--next"
              aria-label="<?php esc_attr_e( '–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', 'flipbook-reader' ); ?>" disabled>‚Ä∫</button>

      <button id="flipbook-tocBtn" class="toc-btn"
              aria-label="<?php esc_attr_e( '–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ', 'flipbook-reader' ); ?>">‚ò∞</button>

      <progress id="flipbook-reading-progress" class="reading-progress" value="0" max="100"></progress>

      <button id="flipbook-continueBtn" class="continue-btn" hidden>
        <?php esc_html_e( '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ', 'flipbook-reader' ); ?>
      </button>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="control-pod settings-pod">
      <!-- –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ -->
      <div class="font-size-control">
        <button id="flipbook-decrease" aria-label="<?php esc_attr_e( '–£–º–µ–Ω—å—à–∏—Ç—å —à—Ä–∏—Ñ—Ç', 'flipbook-reader' ); ?>">A‚àí</button>
        <span id="flipbook-font-size-value">18</span>
        <button id="flipbook-increase" aria-label="<?php esc_attr_e( '–£–≤–µ–ª–∏—á–∏—Ç—å —à—Ä–∏—Ñ—Ç', 'flipbook-reader' ); ?>">A+</button>
      </div>

      <!-- –¢–µ–º–∞ -->
      <div class="theme-segmented" id="flipbook-themeSegmented" role="radiogroup"
           aria-label="<?php esc_attr_e( '–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è', 'flipbook-reader' ); ?>">
        <button data-theme="light" role="radio" aria-checked="true">‚òÄÔ∏è</button>
        <button data-theme="dark" role="radio" aria-checked="false">üåô</button>
        <button data-theme="bw" role="radio" aria-checked="false">‚óë</button>
      </div>

      <!-- –®—Ä–∏—Ñ—Ç -->
      <select id="flipbook-fontSelect" aria-label="<?php esc_attr_e( '–í—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞', 'flipbook-reader' ); ?>">
        <option value="georgia">Georgia</option>
        <option value="merriweather">Merriweather</option>
        <option value="libre-baskerville">Libre Baskerville</option>
        <option value="inter">Inter</option>
        <option value="roboto">Roboto</option>
        <option value="open-sans">Open Sans</option>
      </select>

      <button id="flipbook-fullscreen-btn" class="fullscreen-btn"
              aria-label="<?php esc_attr_e( '–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º', 'flipbook-reader' ); ?>">‚õ∂</button>
    </div>

    <!-- –ê—É–¥–∏–æ -->
    <div class="control-pod audio-pod">
      <label class="sound-toggle-label">
        <input type="checkbox" id="flipbook-sound-toggle" checked>
        <span><?php esc_html_e( '–ó–≤—É–∫', 'flipbook-reader' ); ?></span>
      </label>
      <div id="flipbook-pageVolumeControl" class="volume-control">
        <input type="range" id="flipbook-volume-slider" min="0" max="100" value="30"
               aria-label="<?php esc_attr_e( '–ì—Ä–æ–º–∫–æ—Å—Ç—å –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è', 'flipbook-reader' ); ?>">
      </div>

      <div id="flipbook-ambientPills" class="ambient-pills" role="radiogroup"
           aria-label="<?php esc_attr_e( '–§–æ–Ω–æ–≤—ã–π –∑–≤—É–∫', 'flipbook-reader' ); ?>">
        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript'–æ–º –∏–∑ CONFIG.AMBIENT -->
      </div>
      <div id="flipbook-ambientVolumeWrapper" class="volume-control" hidden>
        <input type="range" id="flipbook-ambient-volume" min="0" max="100" value="50"
               aria-label="<?php esc_attr_e( '–ì—Ä–æ–º–∫–æ—Å—Ç—å —Ñ–æ–Ω–æ–≤–æ–≥–æ –∑–≤—É–∫–∞', 'flipbook-reader' ); ?>">
      </div>
    </div>
  </aside>

</div><!-- .flipbook-reader -->
```

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å index.html

| –ë—ã–ª–æ (index.html) | –°—Ç–∞–ª–æ (PHP-—à–∞–±–ª–æ–Ω) | –ü–æ—á–µ–º—É |
|---|---|---|
| `id="leftA"` | `id="flipbook-leftA"` | –ü—Ä–µ—Ñ–∏–∫—Å `flipbook-` —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏/—Ç–µ–º–æ–π |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç | `esc_html_e('...', 'flipbook-reader')` | –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (i18n) ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ |
| `<script>` / `<link>` | –£–±—Ä–∞–Ω—ã | WordPress –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ `wp_enqueue_script/style` |
| `<body data-debug>` | `<div class="flipbook-reader" data-debug>` | –ù–∞—à –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–º–µ—Å—Ç–æ body |
| Google Fonts preload | –£–±—Ä–∞–Ω–æ | –ü–æ–¥–∫–ª—é—á–∏–º —á–µ—Ä–µ–∑ `wp_enqueue_style` |

### –í–∞–∂–Ω–æ: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOMManager.js

–ü–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ `id` —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å `flipbook-`, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `DOMManager.js`:

```javascript
// –ë–´–õ–û:
const $ = id => document.getElementById(id);
this.elements = { leftA: $('leftA'), ... }

// –°–¢–ê–õ–û:
const $ = id => document.getElementById('flipbook-' + id);
this.elements = { leftA: $('leftA'), ... }
// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥:
this.elements = { leftA: $('flipbook-leftA'), ... }
```

---

## 8. Custom Post Type –¥–ª—è –≥–ª–∞–≤

### –ß—Ç–æ —Ç–∞–∫–æ–µ Custom Post Type (CPT)

WordPress –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –∏–º–µ–µ—Ç —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ¬´–ó–∞–ø–∏—Å–∏¬ª (posts) –∏ ¬´–°—Ç—Ä–∞–Ω–∏—Ü—ã¬ª (pages). CPT ‚Äî —ç—Ç–æ –≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî ¬´–ì–ª–∞–≤—ã –∫–Ω–∏–≥–∏¬ª.

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ CPT –≤ –∞–¥–º–∏–Ω–∫–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª ¬´–ì–ª–∞–≤—ã¬ª —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –≥–ª–∞–≤—ã.

### –§–∞–π–ª `includes/class-flipbook-cpt.php`

```php
<?php
if ( ! defined( 'ABSPATH' ) ) exit;

class Flipbook_CPT {

    /**
     * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Custom Post Type.
     * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ö—É–∫–µ 'init'.
     */
    public static function register() {
        // –ú–µ—Ç–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∞–¥–º–∏–Ω–∫–∏
        $labels = array(
            'name'               => __( '–ì–ª–∞–≤—ã', 'flipbook-reader' ),
            'singular_name'      => __( '–ì–ª–∞–≤–∞', 'flipbook-reader' ),
            'add_new'            => __( '–î–æ–±–∞–≤–∏—Ç—å –≥–ª–∞–≤—É', 'flipbook-reader' ),
            'add_new_item'       => __( '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≥–ª–∞–≤—É', 'flipbook-reader' ),
            'edit_item'          => __( '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–ª–∞–≤—É', 'flipbook-reader' ),
            'new_item'           => __( '–ù–æ–≤–∞—è –≥–ª–∞–≤–∞', 'flipbook-reader' ),
            'view_item'          => __( '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥–ª–∞–≤—É', 'flipbook-reader' ),
            'search_items'       => __( '–ù–∞–π—Ç–∏ –≥–ª–∞–≤—É', 'flipbook-reader' ),
            'not_found'          => __( '–ì–ª–∞–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'flipbook-reader' ),
            'not_found_in_trash' => __( '–í –∫–æ—Ä–∑–∏–Ω–µ –≥–ª–∞–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'flipbook-reader' ),
            'menu_name'          => __( 'Flipbook', 'flipbook-reader' ),
        );

        // –ê—Ä–≥—É–º–µ–Ω—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        $args = array(
            'labels'             => $labels,
            'public'             => false,      // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            'show_ui'            => true,        // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ
            'show_in_menu'       => true,        // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –º–µ–Ω—é –∞–¥–º–∏–Ω–∫–∏
            'show_in_rest'       => true,        // –í–∫–ª—é—á–∏—Ç—å REST API (–Ω—É–∂–Ω–æ –¥–ª—è Gutenberg –∏ –Ω–∞—à–µ–≥–æ API)
            'menu_icon'          => 'dashicons-book',  // –ò–∫–æ–Ω–∫–∞ –≤ –º–µ–Ω—é
            'menu_position'      => 25,          // –ü–æ–∑–∏—Ü–∏—è –≤ –º–µ–Ω—é (–ø–æ—Å–ª–µ ¬´–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏¬ª)
            'supports'           => array(
                'title',          // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–ª–∞–≤—ã
                'editor',         // –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Gutenberg)
                'page-attributes' // –ü–æ—Ä—è–¥–æ–∫ (menu_order) ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≥–ª–∞–≤
            ),
            'has_archive'        => false,       // –ù–µ—Ç –∞—Ä—Ö–∏–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            'rewrite'            => false,       // –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö URL –¥–ª—è –≥–ª–∞–≤
            'capability_type'    => 'post',      // –ü—Ä–∞–≤–∞ –∫–∞–∫ —É –æ–±—ã—á–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
            'hierarchical'       => false,       // –ù–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ (–∫–∞–∫ –∑–∞–ø–∏—Å–∏, –∞ –Ω–µ –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
        );

        register_post_type( 'flipbook_chapter', $args );
    }

    /**
     * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞-–ø–æ–ª–µ–π –¥–ª—è –≥–ª–∞–≤—ã.
     * –ú–µ—Ç–∞-–ø–æ–ª—è ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –ø–æ—Å—Ç—É.
     */
    public static function register_meta_boxes() {
        add_meta_box(
            'flipbook_chapter_settings',                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
            __( '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª–∞–≤—ã', 'flipbook-reader' ),    // –ó–∞–≥–æ–ª–æ–≤–æ–∫
            array( __CLASS__, 'render_meta_box' ),          // Callback –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
            'flipbook_chapter',                             // –î–ª—è –∫–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –ø–æ—Å—Ç–æ–≤
            'side',                                         // –ü–æ–∑–∏—Ü–∏—è (—Å–∞–π–¥–±–∞—Ä)
            'default'                                       // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
        );
    }

    /**
     * –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–µ—Ç–∞-–±–æ–∫—Å–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≥–ª–∞–≤—ã.
     */
    public static function render_meta_box( $post ) {
        // Nonce –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç CSRF)
        wp_nonce_field( 'flipbook_chapter_meta', 'flipbook_chapter_nonce' );

        // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        $bg_image    = get_post_meta( $post->ID, '_flipbook_bg_image', true );
        $bg_mobile   = get_post_meta( $post->ID, '_flipbook_bg_mobile', true );
        $chapter_order = $post->menu_order;
        ?>
        <p>
            <label for="flipbook_bg_image">
                <?php esc_html_e( '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–¥–µ—Å–∫—Ç–æ–ø):', 'flipbook-reader' ); ?>
            </label><br>
            <input type="text" id="flipbook_bg_image" name="flipbook_bg_image"
                   value="<?php echo esc_attr( $bg_image ); ?>" class="widefat">
            <button type="button" class="button flipbook-upload-image" data-target="flipbook_bg_image">
                <?php esc_html_e( '–í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', 'flipbook-reader' ); ?>
            </button>
        </p>
        <p>
            <label for="flipbook_bg_mobile">
                <?php esc_html_e( '–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–º–æ–±–∏–ª—å–Ω–æ–µ):', 'flipbook-reader' ); ?>
            </label><br>
            <input type="text" id="flipbook_bg_mobile" name="flipbook_bg_mobile"
                   value="<?php echo esc_attr( $bg_mobile ); ?>" class="widefat">
            <button type="button" class="button flipbook-upload-image" data-target="flipbook_bg_mobile">
                <?php esc_html_e( '–í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', 'flipbook-reader' ); ?>
            </button>
        </p>
        <p class="description">
            <?php esc_html_e( '–ü–æ—Ä—è–¥–æ–∫ –≥–ª–∞–≤—ã –∑–∞–¥–∞—ë—Ç—Å—è –≤ –ø–æ–ª–µ ¬´–ü–æ—Ä—è–¥–æ–∫¬ª —Å–ø—Ä–∞–≤–∞.', 'flipbook-reader' ); ?>
        </p>
        <?php
    }

    /**
     * –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ—Å—Ç–∞.
     */
    public static function save_meta( $post_id ) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ nonce
        if ( ! isset( $_POST['flipbook_chapter_nonce'] ) ||
             ! wp_verify_nonce( $_POST['flipbook_chapter_nonce'], 'flipbook_chapter_meta' ) ) {
            return;
        }
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
        if ( ! current_user_can( 'edit_post', $post_id ) ) {
            return;
        }
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
            return;
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        if ( isset( $_POST['flipbook_bg_image'] ) ) {
            update_post_meta( $post_id, '_flipbook_bg_image',
                esc_url_raw( $_POST['flipbook_bg_image'] ) );
        }
        if ( isset( $_POST['flipbook_bg_mobile'] ) ) {
            update_post_meta( $post_id, '_flipbook_bg_mobile',
                esc_url_raw( $_POST['flipbook_bg_mobile'] ) );
        }
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≥–ª–∞–≤—ã, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø–æ—Ä—è–¥–∫—É.
     * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è JS.
     *
     * @return array –ú–∞—Å—Å–∏–≤ –≥–ª–∞–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Å CONFIG.CHAPTERS
     */
    public static function get_chapters() {
        $posts = get_posts( array(
            'post_type'      => 'flipbook_chapter',
            'post_status'    => 'publish',
            'posts_per_page' => -1,         // –í—Å–µ –≥–ª–∞–≤—ã
            'orderby'        => 'menu_order', // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—é ¬´–ü–æ—Ä—è–¥–æ–∫¬ª
            'order'          => 'ASC',
        ) );

        $chapters = array();
        foreach ( $posts as $post ) {
            $chapters[] = array(
                'id'       => $post->post_name,     // Slug –ø–æ—Å—Ç–∞ (–Ω–∞–ø—Ä. "part_1")
                'title'    => $post->post_title,
                'file'     => rest_url( 'flipbook/v1/chapter/' . $post->post_name ),
                'bg'       => get_post_meta( $post->ID, '_flipbook_bg_image', true ),
                'bgMobile' => get_post_meta( $post->ID, '_flipbook_bg_mobile', true ),
            );
        }

        return $chapters;
    }
}
```

### –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç

1. –û—Ç–∫—Ä–æ–π –∞–¥–º–∏–Ω–∫—É WordPress ‚Üí –≤ –º–µ–Ω—é —Å–ª–µ–≤–∞ –ø–æ—è–≤–∏—Ç—Å—è **¬´Flipbook¬ª** (—Å –∏–∫–æ–Ω–∫–æ–π –∫–Ω–∏–≥–∏)
2. –ù–∞–∂–º–∏ **¬´–î–æ–±–∞–≤–∏—Ç—å –≥–ª–∞–≤—É¬ª**
3. –í–≤–µ–¥–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫: –Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–ì–ª–∞–≤–∞ 1. –ù–µ–∂–¥–∞–Ω–Ω–æ–µ —É–≥–æ—â–µ–Ω–∏–µ¬ª
4. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≤—Å—Ç–∞–≤—å HTML-–∫–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤—ã (–º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `public/content/part_1.html`)
5. –í —Å–∞–π–¥–±–∞—Ä–µ —Å–ø—Ä–∞–≤–∞ –≤—ã–±–µ—Ä–∏ —Ñ–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
6. –í –ø–æ–ª–µ **¬´–ü–æ—Ä—è–¥–æ–∫¬ª** —É–∫–∞–∂–∏ —á–∏—Å–ª–æ (1, 2, 3...) –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
7. –ù–∞–∂–º–∏ **¬´–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å¬ª**

---

## 9. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∞–¥–º–∏–Ω–∫–µ

### –§–∞–π–ª `includes/class-flipbook-settings.php`

```php
<?php
if ( ! defined( 'ABSPATH' ) ) exit;

class Flipbook_Settings {

    // –ò–º—è –≥—Ä—É–ø–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ë–î
    const OPTION_GROUP = 'flipbook_settings';
    const OPTION_NAME  = 'flipbook_options';

    /**
     * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫.
     * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ö—É–∫–µ 'admin_menu'.
     */
    public static function add_settings_page() {
        add_submenu_page(
            'edit.php?post_type=flipbook_chapter', // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
            __( '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Flipbook', 'flipbook-reader' ),  // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            __( '–ù–∞—Å—Ç—Ä–æ–π–∫–∏', 'flipbook-reader' ),            // –¢–µ–∫—Å—Ç –≤ –º–µ–Ω—é
            'manage_options',                                 // –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
            'flipbook-settings',                              // Slug —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            array( __CLASS__, 'render_page' )                 // Callback –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
        );
    }

    /**
     * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫.
     * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ö—É–∫–µ 'admin_init'.
     */
    public static function register_settings() {
        register_setting(
            self::OPTION_GROUP,
            self::OPTION_NAME,
            array(
                'type'              => 'array',
                'sanitize_callback' => array( __CLASS__, 'sanitize' ),
                'default'           => self::defaults(),
            )
        );

        // –°–µ–∫—Ü–∏—è ¬´–û—Å–Ω–æ–≤–Ω—ã–µ¬ª
        add_settings_section(
            'flipbook_general',
            __( '–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏', 'flipbook-reader' ),
            null,
            'flipbook-settings'
        );

        // –ü–æ–ª–µ: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–Ω–∏–≥–∏
        add_settings_field(
            'book_title',
            __( '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏', 'flipbook-reader' ),
            array( __CLASS__, 'render_text_field' ),
            'flipbook-settings',
            'flipbook_general',
            array( 'field' => 'book_title', 'description' => '–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –æ–±–ª–æ–∂–∫–µ' )
        );

        // –ü–æ–ª–µ: –ê–≤—Ç–æ—Ä
        add_settings_field(
            'book_author',
            __( '–ê–≤—Ç–æ—Ä', 'flipbook-reader' ),
            array( __CLASS__, 'render_text_field' ),
            'flipbook-settings',
            'flipbook_general',
            array( 'field' => 'book_author' )
        );

        // –ü–æ–ª–µ: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±–ª–æ–∂–∫–∏
        add_settings_field(
            'cover_image',
            __( '–§–æ–Ω –æ–±–ª–æ–∂–∫–∏', 'flipbook-reader' ),
            array( __CLASS__, 'render_image_field' ),
            'flipbook-settings',
            'flipbook_general',
            array( 'field' => 'cover_image' )
        );

        // –ü–æ–ª–µ: –®—Ä–∏—Ñ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        add_settings_field(
            'default_font',
            __( '–®—Ä–∏—Ñ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é', 'flipbook-reader' ),
            array( __CLASS__, 'render_select_field' ),
            'flipbook-settings',
            'flipbook_general',
            array(
                'field'   => 'default_font',
                'options' => array(
                    'georgia'          => 'Georgia',
                    'merriweather'     => 'Merriweather',
                    'libre-baskerville' => 'Libre Baskerville',
                    'inter'            => 'Inter',
                    'roboto'           => 'Roboto',
                    'open-sans'        => 'Open Sans',
                ),
            )
        );

        // –ü–æ–ª–µ: –¢–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        add_settings_field(
            'default_theme',
            __( '–¢–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é', 'flipbook-reader' ),
            array( __CLASS__, 'render_select_field' ),
            'flipbook-settings',
            'flipbook_general',
            array(
                'field'   => 'default_theme',
                'options' => array(
                    'light' => __( '–°–≤–µ—Ç–ª–∞—è', 'flipbook-reader' ),
                    'dark'  => __( '–¢—ë–º–Ω–∞—è', 'flipbook-reader' ),
                    'bw'    => __( '–ß—ë—Ä–Ω–æ-–±–µ–ª–∞—è', 'flipbook-reader' ),
                ),
            )
        );

        // –ü–æ–ª–µ: –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫–∏
        add_settings_field(
            'enable_sounds',
            __( '–ó–≤—É–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é', 'flipbook-reader' ),
            array( __CLASS__, 'render_checkbox_field' ),
            'flipbook-settings',
            'flipbook_general',
            array( 'field' => 'enable_sounds', 'label' => '–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã' )
        );
    }

    /**
     * –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
     */
    public static function defaults() {
        return array(
            'book_title'    => '–ö–Ω–∏–≥–∞',
            'book_author'   => '',
            'cover_image'   => '',
            'default_font'  => 'georgia',
            'default_theme' => 'light',
            'enable_sounds' => true,
        );
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å fallback –Ω–∞ defaults).
     */
    public static function get_options() {
        return wp_parse_args(
            get_option( self::OPTION_NAME, array() ),
            self::defaults()
        );
    }

    /**
     * –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.
     */
    public static function sanitize( $input ) {
        $clean = array();
        $clean['book_title']    = sanitize_text_field( $input['book_title'] ?? '' );
        $clean['book_author']   = sanitize_text_field( $input['book_author'] ?? '' );
        $clean['cover_image']   = esc_url_raw( $input['cover_image'] ?? '' );
        $clean['default_font']  = sanitize_key( $input['default_font'] ?? 'georgia' );
        $clean['default_theme'] = sanitize_key( $input['default_theme'] ?? 'light' );
        $clean['enable_sounds'] = ! empty( $input['enable_sounds'] );
        return $clean;
    }

    // --- –§—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ø–æ–ª–µ–π ---

    public static function render_text_field( $args ) {
        $options = self::get_options();
        $value = $options[ $args['field'] ] ?? '';
        printf(
            '<input type="text" name="%s[%s]" value="%s" class="regular-text">',
            self::OPTION_NAME,
            esc_attr( $args['field'] ),
            esc_attr( $value )
        );
        if ( ! empty( $args['description'] ) ) {
            printf( '<p class="description">%s</p>', esc_html( $args['description'] ) );
        }
    }

    public static function render_select_field( $args ) {
        $options = self::get_options();
        $value = $options[ $args['field'] ] ?? '';
        printf( '<select name="%s[%s]">', self::OPTION_NAME, esc_attr( $args['field'] ) );
        foreach ( $args['options'] as $key => $label ) {
            printf(
                '<option value="%s" %s>%s</option>',
                esc_attr( $key ),
                selected( $value, $key, false ),
                esc_html( $label )
            );
        }
        echo '</select>';
    }

    public static function render_checkbox_field( $args ) {
        $options = self::get_options();
        $checked = ! empty( $options[ $args['field'] ] );
        printf(
            '<label><input type="checkbox" name="%s[%s]" value="1" %s> %s</label>',
            self::OPTION_NAME,
            esc_attr( $args['field'] ),
            checked( $checked, true, false ),
            esc_html( $args['label'] ?? '' )
        );
    }

    public static function render_image_field( $args ) {
        $options = self::get_options();
        $value = $options[ $args['field'] ] ?? '';
        printf(
            '<input type="text" name="%s[%s]" value="%s" class="regular-text" id="%s">',
            self::OPTION_NAME,
            esc_attr( $args['field'] ),
            esc_attr( $value ),
            esc_attr( $args['field'] )
        );
        printf(
            ' <button type="button" class="button flipbook-upload-image" data-target="%s">%s</button>',
            esc_attr( $args['field'] ),
            esc_html__( '–í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', 'flipbook-reader' )
        );
        if ( $value ) {
            printf( '<br><img src="%s" style="max-width:200px;margin-top:8px;">', esc_url( $value ) );
        }
    }

    /**
     * –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫.
     */
    public static function render_page() {
        ?>
        <div class="wrap">
            <h1><?php esc_html_e( '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Flipbook Reader', 'flipbook-reader' ); ?></h1>
            <form method="post" action="options.php">
                <?php
                settings_fields( self::OPTION_GROUP );
                do_settings_sections( 'flipbook-settings' );
                submit_button();
                ?>
            </form>
        </div>
        <?php
    }
}
```

### –ì–¥–µ —ç—Ç–æ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ

```
–ê–¥–º–∏–Ω–∫–∞ WordPress
‚îú‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ Flipbook (–∏–∫–æ–Ω–∫–∞ üìñ)
‚îÇ   ‚îú‚îÄ‚îÄ –í—Å–µ –≥–ª–∞–≤—ã        ‚Üê —Å–ø–∏—Å–æ–∫ –≥–ª–∞–≤
‚îÇ   ‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–∏—Ç—å –≥–ª–∞–≤—É   ‚Üê —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–æ–≤–æ–π –≥–ª–∞–≤—ã
‚îÇ   ‚îî‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∏        ‚Üê —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–Ω–∞—à–∞)
‚îú‚îÄ‚îÄ ...
```

---

## 10. Shortcode –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∫–Ω–∏–≥–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ Shortcode

Shortcode ‚Äî —ç—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥ –≤–∏–¥–∞ `[flipbook]`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –ª—é–±–æ–π –ø–æ—Å—Ç –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É WordPress. WordPress –∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ –Ω–∞ HTML-–∫–æ–Ω—Ç–µ–Ω—Ç.

### –§–∞–π–ª `includes/class-flipbook-shortcode.php`

```php
<?php
if ( ! defined( 'ABSPATH' ) ) exit;

class Flipbook_Shortcode {

    /**
     * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è shortcode.
     * –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ [flipbook] –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.
     */
    public static function register() {
        add_shortcode( 'flipbook', array( __CLASS__, 'render' ) );
    }

    /**
     * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ shortcode.
     * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è WordPress –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç [flipbook] –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ.
     *
     * @param array $atts –ê—Ç—Ä–∏–±—É—Ç—ã shortcode
     *   –ü—Ä–∏–º–µ—Ä: [flipbook book_id="hobbit" theme="dark"]
     *           $atts = ['book_id' => 'hobbit', 'theme' => 'dark']
     *
     * @return string HTML-—Ä–∞–∑–º–µ—Ç–∫–∞ –∫–Ω–∏–≥–∏
     */
    public static function render( $atts ) {
        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏
        $atts = shortcode_atts( array(
            'book_id' => '',     // ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–Ω–∏–≥–∏ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
            'height'  => '90vh', // –í—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
            'theme'   => '',     // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ç–µ–º–∞ (–ø—É—Å—Ç–æ = –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫)
        ), $atts, 'flipbook' );

        // –ü–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
        $settings = Flipbook_Settings::get_options();

        // –ü–æ–ª—É—á–∞–µ–º –≥–ª–∞–≤—ã
        $chapters = Flipbook_CPT::get_chapters();
        if ( empty( $chapters ) ) {
            return '<p class="flipbook-no-content">' .
                   esc_html__( '–ì–ª–∞–≤—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –≥–ª–∞–≤—ã –≤ —Ä–∞–∑–¥–µ–ª–µ Flipbook.', 'flipbook-reader' ) .
                   '</p>';
        }

        // –ü–æ–¥–∫–ª—é—á–∞–µ–º CSS –∏ JS (—Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, –≥–¥–µ –µ—Å—Ç—å shortcode)
        Flipbook_Assets::enqueue();

        // –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ –≤ JavaScript
        wp_localize_script( 'flipbook-js', 'flipbookConfig', array(
            'baseUrl'    => FLIPBOOK_ASSETS_URL,
            'restUrl'    => rest_url( 'flipbook/v1/' ),
            'nonce'      => wp_create_nonce( 'wp_rest' ),
            'chapters'   => $chapters,
            'settings'   => array(
                'book_title'   => $settings['book_title'],
                'book_author'  => $settings['book_author'],
                'cover_image'  => $settings['cover_image'],
                'default_font' => $settings['default_font'],
                'default_theme' => $atts['theme'] ?: $settings['default_theme'],
                'enable_sounds' => $settings['enable_sounds'],
            ),
            'sounds'     => array(
                'pageFlip'  => FLIPBOOK_ASSETS_URL . 'sounds/page-flip.mp3',
                'bookOpen'  => FLIPBOOK_ASSETS_URL . 'sounds/cover-flip.mp3',
                'bookClose' => FLIPBOOK_ASSETS_URL . 'sounds/cover-flip.mp3',
            ),
            'ambient'    => array(
                'none'      => array( 'label' => '–ë–µ–∑ –∑–≤—É–∫–∞', 'icon' => '‚úï', 'file' => null ),
                'rain'      => array( 'label' => '–î–æ–∂–¥—å', 'icon' => 'üåßÔ∏è',
                                      'file' => FLIPBOOK_ASSETS_URL . 'sounds/ambient/rain.mp3' ),
                'fireplace' => array( 'label' => '–ö–∞–º–∏–Ω', 'icon' => 'üî•',
                                      'file' => FLIPBOOK_ASSETS_URL . 'sounds/ambient/fireplace.mp3' ),
                'cafe'      => array( 'label' => '–ö–∞—Ñ–µ', 'icon' => '‚òï',
                                      'file' => FLIPBOOK_ASSETS_URL . 'sounds/ambient/cafe.mp3' ),
            ),
        ) );

        // –†–µ–Ω–¥–µ—Ä–∏–º —à–∞–±–ª–æ–Ω
        // ob_start() –Ω–∞—á–∏–Ω–∞–µ—Ç –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é –≤—ã–≤–æ–¥–∞ ‚Äî
        // –≤—Å—ë, —á—Ç–æ –≤—ã–≤–µ–¥–µ—Ç include, –ø–æ–ø–∞–¥—ë—Ç –≤ –±—É—Ñ–µ—Ä, –∞ –Ω–µ –Ω–∞ —ç–∫—Ä–∞–Ω
        ob_start();
        include FLIPBOOK_PATH . 'templates/flipbook-template.php';
        return ob_get_clean(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É—Ñ–µ—Ä–∞ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
    }
}
```

### –§–∞–π–ª `includes/class-flipbook-assets.php`

```php
<?php
if ( ! defined( 'ABSPATH' ) ) exit;

class Flipbook_Assets {

    private static $enqueued = false;

    /**
     * –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS –∏ JS.
     * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å shortcode [flipbook].
     */
    public static function enqueue() {
        // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        if ( self::$enqueued ) return;
        self::$enqueued = true;

        // CSS
        wp_enqueue_style(
            'flipbook-css',                                  // Handle (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è)
            FLIPBOOK_ASSETS_URL . 'dist/flipbook.css',       // URL —Ñ–∞–π–ª–∞
            array(),                                          // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–µ—Ç)
            FLIPBOOK_VERSION                                  // –í–µ—Ä—Å–∏—è (–¥–ª—è –∫—ç—à-–±–∞—Å—Ç–∏–Ω–≥–∞)
        );

        // Google Fonts
        wp_enqueue_style(
            'flipbook-google-fonts',
            'https://fonts.googleapis.com/css2?' .
            'family=Inter:wght@400;500&' .
            'family=Merriweather:wght@400;700&' .
            'family=Libre+Baskerville:wght@400;700&' .
            'family=Open+Sans:wght@400;600&' .
            'family=Roboto:wght@400;500&' .
            'display=swap',
            array(),
            null  // null = –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å ?ver= (Google Fonts –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è)
        );

        // JavaScript
        wp_enqueue_script(
            'flipbook-js',                                   // Handle
            FLIPBOOK_ASSETS_URL . 'dist/flipbook.js',        // URL —Ñ–∞–π–ª–∞
            array(),                                          // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
            FLIPBOOK_VERSION,                                 // –í–µ—Ä—Å–∏—è
            true                                              // –í footer (true = –ø–µ—Ä–µ–¥ </body>)
        );
    }
}
```

### –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç shortcode

1. –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é **–°—Ç—Ä–∞–Ω–∏—Ü—É** –≤ WordPress (–°—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é)
2. –ù–∞–∑–æ–≤–∏ –µ—ë, –Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–ß–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É¬ª
3. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≤—Å—Ç–∞–≤—å: `[flipbook]`
4. –û–ø—É–±–ª–∏–∫—É–π —Å—Ç—Ä–∞–Ω–∏—Ü—É
5. –û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî —Ç–∞–º –±—É–¥–µ—Ç –∫–Ω–∏–≥–∞

**–° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
```
[flipbook height="100vh" theme="dark"]
```

---

## 11. Gutenberg-–±–ª–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ó–∞—á–µ–º

Shortcode `[flipbook]` —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ. Gutenberg-–±–ª–æ–∫ –¥–∞—ë—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä—è–º–æ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.

### –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∑–∂–µ

–î–ª—è MVP (–ø–µ—Ä–≤–æ–π —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏) shortcode –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. Gutenberg-–±–ª–æ–∫ ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞, —Ç—Ä–µ–±—É—é—â–∞—è –∑–Ω–∞–Ω–∏—è React. –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–µ–π –ø–æ–∑–∂–µ.

### –ö—Ä–∞—Ç–∫–∏–π –ø–ª–∞–Ω (–µ—Å–ª–∏ —Ä–µ—à–∏—à—å –¥–µ–ª–∞—Ç—å)

1. –°–æ–∑–¥–∞–π `blocks/flipbook/block.json` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª–æ–∫–∞
2. `blocks/flipbook/edit.js` ‚Äî React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–≤—å—é)
3. `blocks/flipbook/save.js` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (PHP) –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ shortcode
4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π —á–µ—Ä–µ–∑ `register_block_type()` –≤ PHP
5. –°–æ–±–µ—Ä–∏ —á–µ—Ä–µ–∑ `@wordpress/scripts` –∏–ª–∏ —Ç–æ—Ç –∂–µ Vite

---

## 12. –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏

### –ó–≤—É–∫–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã

–≠—Ç–∏ —Ñ–∞–π–ª—ã –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø–∞–ø–∫—É `assets/`.

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø–ª–∞–≥–∏–Ω–∞:
cp -r /path/to/flipbook/public/sounds assets/sounds
cp -r /path/to/flipbook/public/images assets/images
cp -r /path/to/flipbook/public/fonts assets/fonts
```

### –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

–í –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –ø—É—Ç–∏ –≤–∏–¥–∞ `/sounds/page-flip.mp3` —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ Vite dev-server.
–í WordPress –ø—É—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ URL:

```
https://example.com/wp-content/plugins/flipbook-reader/assets/sounds/page-flip.mp3
```

–≠—Ç–∏ URL —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ PHP —á–µ—Ä–µ–∑ `FLIPBOOK_ASSETS_URL` –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ JS —á–µ—Ä–µ–∑ `wp_localize_script`.

### –ú–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ WordPress

–î–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–ª–∞–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º **WordPress Media Library** (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∞). –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å WP, –∞ –≤ –º–µ—Ç–∞-–ø–æ–ª–µ –≥–ª–∞–≤—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è URL.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–µ–Ω JS-—Å–∫—Ä–∏–ø—Ç, –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–π –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫—É:

```javascript
// assets/admin.js ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –≤ –∞–¥–º–∏–Ω–∫–µ
jQuery(function($) {
    $('.flipbook-upload-image').on('click', function(e) {
        e.preventDefault();
        var button = $(this);
        var targetInput = $('#' + button.data('target'));

        var frame = wp.media({
            title: '–í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
            button: { text: '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å' },
            multiple: false
        });

        frame.on('select', function() {
            var attachment = frame.state().get('selection').first().toJSON();
            targetInput.val(attachment.url);
        });

        frame.open();
    });
});
```

```php
// –í class-flipbook-plugin.php, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ –∞–¥–º–∏–Ω–∫–µ:
public function admin_scripts( $hook ) {
    // –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –Ω–∞—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
    $screen = get_current_screen();
    if ( $screen->post_type !== 'flipbook_chapter' && $hook !== 'flipbook_chapter_page_flipbook-settings' ) {
        return;
    }

    wp_enqueue_media(); // –ü–æ–¥–∫–ª—é—á–∞–µ—Ç WP Media Library
    wp_enqueue_script(
        'flipbook-admin',
        FLIPBOOK_ASSETS_URL . 'admin.js',
        array( 'jquery' ),
        FLIPBOOK_VERSION,
        true
    );
}
```

---

## 13. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ –Ω—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å

| –ê—Å–ø–µ–∫—Ç | –û—Ä–∏–≥–∏–Ω–∞–ª | WordPress-–≤–µ—Ä—Å–∏—è |
|---|---|---|
| **XSS-–∑–∞—â–∏—Ç–∞** | `HTMLSanitizer.js` | –û—Å—Ç–∞–≤–ª—è–µ–º + PHP-—Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è (`esc_html`, `wp_kses`) |
| **CSRF** | –ù–µ—Ç (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç) | `wp_nonce_field()` / `wp_verify_nonce()` |
| **SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏** | –ù–µ—Ç –ë–î | WordPress `$wpdb->prepare()` (–µ—Å–ª–∏ –ø–∏—à–µ–º SQL) |
| **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º** | –ù–µ—Ç | `if (!defined('ABSPATH')) exit;` |
| **CSP** | Meta-—Ç–µ–≥ –≤ HTML | –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º/—Ç–µ–º–æ–π ‚Äî **—É–±—Ä–∞—Ç—å –º–µ—Ç–∞-—Ç–µ–≥** |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | `sanitize_text_field()`, `esc_url_raw()`, `absint()` |
| **REST API** | –ù–µ—Ç | `permission_callback` + nonce |

### –ü—Ä–∞–≤–∏–ª–æ —Ç—Ä—ë—Ö ¬´–≠¬ª

–í WordPress –≤—Å–µ–≥–¥–∞ —Å–æ–±–ª—é–¥–∞–π:
1. **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (escape) ‚Äî –ø—Ä–∏ –≤—ã–≤–æ–¥–µ: `esc_html()`, `esc_attr()`, `esc_url()`
2. **–≠—Ç–∞–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (sanitize) ‚Äî –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: `sanitize_text_field()`, `wp_kses()`
3. **–≠–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** (nonce) ‚Äî –ø—Ä–∏ —Ñ–æ—Ä–º–∞—Ö: `wp_nonce_field()`, `wp_verify_nonce()`

---

## 14. –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: 3D-—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ª–æ–º–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:** –ö–Ω–∏–≥–∞ –ø–ª–æ—Å–∫–∞—è, –Ω–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è.

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ–º–∞ WordPress –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–ª–∞–≥–∏–Ω —Å—Ç–∞–≤–∏—Ç `overflow: hidden` –∏–ª–∏ `transform` –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ. –≠—Ç–æ –ª–æ–º–∞–µ—Ç CSS `perspective` –∏ 3D-—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```css
/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–∞, –ª–æ–º–∞—é—â–∏–µ 3D */
.flipbook-reader {
  transform: none !important;
  overflow: visible !important;
}

/* –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º CSS containment: */
.flipbook-reader {
  contain: layout style;
  isolation: isolate;
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: jQuery-–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–°–∏–º–ø—Ç–æ–º:** JS-–æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** WordPress –∑–∞–≥—Ä—É–∂–∞–µ—Ç jQuery –≤ noConflict-—Ä–µ–∂–∏–º–µ, `$` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—à –∫–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç jQuery (vanilla JS), –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–±–ª–µ–º –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å. –ù–æ –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç–µ jQuery-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```javascript
// –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤ WordPress:
jQuery(function($) {
  // $ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
  $('.flipbook-reader').doSomething();
});
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°—Ç–∏–ª–∏ —Ç–µ–º—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç–∏–ª–∏ –∫–Ω–∏–≥–∏

**–°–∏–º–ø—Ç–æ–º:** –®—Ä–∏—Ñ—Ç—ã, —Ü–≤–µ—Ç–∞, –æ—Ç—Å—Ç—É–ø—ã –≤ –∫–Ω–∏–≥–µ –≤—ã–≥–ª—è–¥—è—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–ü—Ä–∏—á–∏–Ω–∞:** CSS-–ø—Ä–∞–≤–∏–ª–∞ —Ç–µ–º—ã –∏–º–µ—é—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å.

**–†–µ—à–µ–Ω–∏—è (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è):**

1. **–£–≤–µ–ª–∏—á–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å:**
   ```css
   /* –î–≤–æ–π–Ω–æ–π –∫–ª–∞—Å—Å –ø–æ–≤—ã—à–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å */
   .flipbook-reader.flipbook-reader .page { ... }
   ```

2. **CSS `all: initial` (—è–¥–µ—Ä–Ω–∞—è –æ–ø—Ü–∏—è):**
   ```css
   .flipbook-reader {
     all: initial; /* –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –í–°–Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ */
   }
   .flipbook-reader * {
     all: unset; /* –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Å—Ç–∏–ª–∏ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
   }
   /* –ó–∞—Ç–µ–º –∑–∞–Ω–æ–≤–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω—É–∂–Ω—ã–µ —Å—Ç–∏–ª–∏ */
   ```

3. **Shadow DOM (—Å–∞–º–∞—è –Ω–∞–¥—ë–∂–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è):**
   ```javascript
   // –í entry.js:
   const host = document.querySelector('.flipbook-reader');
   const shadow = host.attachShadow({ mode: 'open' });
   // –í—Å–µ —Å—Ç–∏–ª–∏ –∏ DOM –≤–Ω—É—Ç—Ä–∏ Shadow DOM –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
   shadow.innerHTML = `<style>${flipbookCSS}</style>${flipbookHTML}`;
   ```
   –ú–∏–Ω—É—Å: Shadow DOM —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ (DOM-–∑–∞–ø—Ä–æ—Å—ã –Ω–µ –≤–∏–¥—è—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ shadow).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–Ω–∏ —Å CSS-–ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ (—Å–µ–∫—Ü–∏—è 6) + –ø–æ–≤—ã—à–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π `all: initial` –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–°–∏–º–ø—Ç–æ–º:** –ï—Å–ª–∏ `[flipbook]` –≤—Å—Ç–∞–≤–ª–µ–Ω –¥–≤–∞–∂–¥—ã –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π.

**–ü—Ä–∏—á–∏–Ω–∞:** `document.getElementById()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –í–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö ID ‚Äî –∏—Å–∫–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```javascript
// –ë–´–õ–û:
document.getElementById('flipbook-leftA');

// –°–¢–ê–õ–û:
const container = document.querySelector('.flipbook-reader[data-instance="1"]');
container.querySelector('.page--left[data-active="true"]');
```

–î–ª—è MVP –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–¥–Ω–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏–π

**–°–∏–º–ø—Ç–æ–º:** –°—Ç—Ä–µ–ª–∫–∏ ‚Üê‚Üí –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞—é—Ç –∫–Ω–∏–≥—É, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ñ–æ–∫—É—Å –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `EventController` —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞ `document`.

**–†–µ—à–µ–Ω–∏–µ:** –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –∫–Ω–∏–≥–∏:

```javascript
// –ë–´–õ–û:
document.addEventListener('keydown', handler);

// –°–¢–ê–õ–û:
this.container.addEventListener('keydown', handler);
// + container –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å tabindex="0" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ–∫—É—Å–∞
```

---

## 15. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ß–µ–∫-–ª–∏—Å—Ç:**

- [ ] –ü–ª–∞–≥–∏–Ω –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í –º–µ–Ω—é –ø–æ—è–≤–∏–ª—Å—è —Ä–∞–∑–¥–µ–ª ¬´Flipbook¬ª
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤—É —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] Shortcode `[flipbook]` —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–Ω–∏–≥—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- [ ] –û–±–ª–æ–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –∫–ª–∏–∫–∞–µ—Ç—Å—è, –∫–Ω–∏–≥–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –ü–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–ª–∏–∫, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ)
- [ ] –ö–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –°–º–µ–Ω–∞ —à—Ä–∏—Ñ—Ç–∞, —Ä–∞–∑–º–µ—Ä–∞, —Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–≤—É–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)
- [ ] –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º: —Å–≤–∞–π–ø –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–µ—Ç
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ (Twenty Twenty-Four, Astra, GeneratePress)

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏

–£—Å—Ç–∞–Ω–æ–≤–∏ 2-3 –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–º—ã –∏ –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫–Ω–∏–≥–∞ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –∫–∞–∂–¥–æ–π:

1. **Twenty Twenty-Four** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ WordPress)
2. **Astra** (—Å–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è)
3. **GeneratePress** (–ª—ë–≥–∫–∞—è –∏ —á–∏—Å—Ç–∞—è)

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏

–ü—Ä–æ–≤–µ—Ä—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å:
- **Yoast SEO** ‚Äî –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- **WooCommerce** ‚Äî –µ—Å–ª–∏ –Ω–∞ —Å–∞–π—Ç–µ –µ—Å—Ç—å –º–∞–≥–∞–∑–∏–Ω
- **Elementor / WPBakery** ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ page-builders

### –®–∞–≥ 4: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –∏–∑ `tests/unit/` –º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å:
- –ú–æ–¥—É–ª–∏ JS –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç WordPress ‚Äî —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –µ—Å—Ç—å
- –ù—É–∂–Ω–æ –∑–∞–º–æ–∫–∞—Ç—å `window.flipbookConfig` –≤–º–µ—Å—Ç–æ `import.meta.env`
- E2E —Ç–µ—Å—Ç—ã (Playwright) –ø—Ä–∏–¥—ë—Ç—Å—è –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –¥–ª—è WordPress-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## 16. –£–ø–∞–∫–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ

### –î–ª—è WordPress.org (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–≥–∏–Ω)

1. **–°–æ–∑–¥–∞–π `readme.txt`** –≤ —Ñ–æ—Ä–º–∞—Ç–µ WordPress:
   ```
   === Flipbook Reader ===
   Contributors: your-username
   Tags: ebook, reader, flipbook, 3d, animation
   Requires at least: 5.8
   Tested up to: 6.4
   Requires PHP: 7.4
   Stable tag: 1.0.0
   License: MIT

   Interactive 3D e-book reader with realistic page-flip animations.

   == Description ==
   ...

   == Installation ==
   1. Upload the plugin files to /wp-content/plugins/flipbook-reader/
   2. Activate the plugin through the 'Plugins' screen in WordPress
   3. Add chapters via Flipbook menu
   4. Use [flipbook] shortcode on any page

   == Changelog ==
   = 1.0.0 =
   * Initial release
   ```

2. **–°–æ–±–µ—Ä–∏ ZIP-–∞—Ä—Ö–∏–≤ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
   ```bash
   # –ò–∑ –ø–∞–ø–∫–∏ wp-content/plugins/
   cd flipbook-reader

   # –°–±–æ—Ä–∫–∞ –∞—Å—Å–µ—Ç–æ–≤
   npm run build

   # –°–æ–∑–¥–∞–Ω–∏–µ ZIP (–±–µ–∑ dev-—Ñ–∞–π–ª–æ–≤)
   cd ..
   zip -r flipbook-reader-1.0.0.zip flipbook-reader/ \
     -x "flipbook-reader/node_modules/*" \
     -x "flipbook-reader/src/*" \
     -x "flipbook-reader/.git/*" \
     -x "flipbook-reader/package-lock.json" \
     -x "flipbook-reader/vite.config.js" \
     -x "flipbook-reader/postcss.config.js"
   ```

3. **–ü–æ–¥–∞–π –∑–∞—è–≤–∫—É** –Ω–∞ [wordpress.org/plugins/developers](https://wordpress.org/plugins/developers/) (—Ä–µ–≤—å—é –∑–∞–Ω–∏–º–∞–µ—Ç 1-4 –Ω–µ–¥–µ–ª–∏).

### –î–ª—è —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü—Ä–æ—Å—Ç–æ –¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ZIP-—Ñ–∞–π–ª. –û–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —á–µ—Ä–µ–∑:
**–ê–¥–º–∏–Ω–∫–∞ ‚Üí –ü–ª–∞–≥–∏–Ω—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–∞–≥–∏–Ω ‚Üí –≤—ã–±—Ä–∞—Ç—å ZIP**

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç (–∏—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç)

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å LocalWP, —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∞–π—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –ø–ª–∞–≥–∏–Ω–∞
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –≤ `src/`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `package.json` –∏ `vite.config.js`

### –§–∞–∑–∞ 2: PHP-–∫–∞—Ä–∫–∞—Å (2-3 –¥–Ω—è)
- [ ] –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞ (`flipbook-reader.php`)
- [ ] –ö–ª–∞—Å—Å –ø–ª–∞–≥–∏–Ω–∞ (`class-flipbook-plugin.php`)
- [ ] Custom Post Type –¥–ª—è –≥–ª–∞–≤
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∞–¥–º–∏–Ω–∫–µ
- [ ] Shortcode `[flipbook]`
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS/JS –∞—Å—Å–µ—Ç–æ–≤

### –§–∞–∑–∞ 3: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (3-5 –¥–Ω–µ–π)
- [ ] –ù–æ–≤–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ `src/entry.js` (–±–µ–∑ PWA)
- [ ] –ê–¥–∞–ø—Ç–∞—Ü–∏—è `config.js` (–ø—É—Ç–∏ –∏–∑ `wp_localize_script`)
- [ ] –ê–¥–∞–ø—Ç–∞—Ü–∏—è `DOMManager.js` (–ø—Ä–µ—Ñ–∏–∫—Å—ã ID)
- [ ] –ê–¥–∞–ø—Ç–∞—Ü–∏—è `ContentLoader.js` (REST API –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤)
- [ ] CSS-–∏–∑–æ–ª—è—Ü–∏—è (–ø—Ä–µ—Ñ–∏–∫—Å—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- [ ] –ü–µ—Ä–µ–Ω–æ—Å `data-theme` —Å `<body>` –Ω–∞ `.flipbook-reader`
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ PWA-–ª–æ–≥–∏–∫–∏ –∏–∑ JS
- [ ] PHP-—à–∞–±–ª–æ–Ω (`flipbook-template.php`)
- [ ] –°–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ Vite ‚Üí `assets/dist/`

### –§–∞–∑–∞ 4: REST API (1-2 –¥–Ω—è)
- [ ] Endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≥–ª–∞–≤—ã
- [ ] Nonce-–ø—Ä–æ–≤–µ—Ä–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
- [ ] –ê–¥–∞–ø—Ç–∞—Ü–∏—è JS –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å REST API

### –§–∞–∑–∞ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ (2-3 –¥–Ω—è)
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å 2-3 —Ç–µ–º–∞–º–∏
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CSS-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –§–∞–∑–∞ 6: –£–ø–∞–∫–æ–≤–∫–∞ (1 –¥–µ–Ω—å)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å `readme.txt`
- [ ] –°–æ–∑–¥–∞—Ç—å `uninstall.php`
- [ ] –°–æ–±—Ä–∞—Ç—å ZIP-–∞—Ä—Ö–∏–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É ¬´—Å –Ω—É–ª—è¬ª

**–ò—Ç–æ–≥–æ: ~10-16 –¥–Ω–µ–π** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–ø—ã—Ç–∞ —Å PHP –∏ WordPress)

---

## –ì–ª–æ—Å—Å–∞—Ä–∏–π

| –¢–µ—Ä–º–∏–Ω | –ß—Ç–æ –∑–Ω–∞—á–∏—Ç |
|---|---|
| **Hook (–•—É–∫)** | –¢–æ—á–∫–∞, –∫—É–¥–∞ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π –∫–æ–¥ –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã WordPress |
| **Action** | –¢–∏–ø —Ö—É–∫–∞: ¬´—Å–¥–µ–ª–∞–π —á—Ç–æ-—Ç–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç¬ª |
| **Filter** | –¢–∏–ø —Ö—É–∫–∞: ¬´–∏–∑–º–µ–Ω–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º¬ª |
| **Shortcode** | `[—Ç–µ–≥]` –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π WordPress –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ HTML |
| **Custom Post Type (CPT)** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø–æ–º–∏–º–æ –ø–æ—Å—Ç–æ–≤ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü) |
| **Meta Box** | –ë–ª–æ–∫ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –ø–æ—Å—Ç–∞ |
| **post_meta** | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ—Å—Ç—É |
| **wp_enqueue_script/style** | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è CSS/JS –≤ WordPress |
| **wp_localize_script** | –°–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ PHP –≤ JavaScript |
| **Nonce** | –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç CSRF-–∞—Ç–∞–∫ |
| **sanitize** | –û—á–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º |
| **escape (esc_)** | –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º –≤ HTML |
| **ABSPATH** | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Å –ø—É—Ç—ë–º –∫ –∫–æ—Ä–Ω—é WordPress ‚Äî –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, —Ñ–∞–π–ª –∑–∞–ø—Ä–æ—à–µ–Ω –Ω–∞–ø—Ä—è–º—É—é |
| **IIFE** | Immediately Invoked Function Expression ‚Äî —Ñ–æ—Ä–º–∞—Ç JS-–±–∞–Ω–¥–ª–∞ |
| **REST API** | HTTP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å WordPress –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è/–æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö (JSON) |
| **Gutenberg** | –ë–ª–æ—á–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä WordPress (–Ω–∞—á–∏–Ω–∞—è —Å WP 5.0) |
| **Shadow DOM** | –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–æ–ª—è—Ü–∏–∏ DOM –∏ —Å—Ç–∏–ª–µ–π |
